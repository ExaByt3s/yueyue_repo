<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>{page_title}</title>

    <!-- <link rel="import" href="./webcontrol/head.tpl.htm?__inline">
    -->
    <!-- 公共css，js引入 -->{pc_global_top}<link type="text/css" rel="stylesheet" href="http://static-c.yueus.com/mall/seller/static/pc/modules/common/layer/skin/layer_d032379.css">
<link type="text/css" rel="stylesheet" href="http://static-c.yueus.com/mall/seller/static/pc/modules/common/upload/1.0.0/css/style_26e92d7.css">
<script type="text/javascript" charset="gbk" src="http://static-c.yueus.com/mall/seller/components/jquery/jquery_27c977b.js"></script>
<script type="text/javascript" charset="gbk" src="http://static-c.yueus.com/mall/seller/static/pc/js/common/common_26d9479.js"></script>
<script type="text/javascript" charset="gbk" src="http://static-c.yueus.com/mall/seller/static/pc/modules/common/layer/layer_906feb7.js"></script>
<script type="text/javascript" charset="gbk" src="http://static-c.yueus.com/mall/seller/static/pc/modules/common/sortable/core_83840a8.js"></script>
<script type="text/javascript" charset="gbk" src="http://static-c.yueus.com/mall/seller/static/pc/modules/common/sortable/widget_4835767.js"></script>
<script type="text/javascript" charset="gbk" src="http://static-c.yueus.com/mall/seller/static/pc/modules/common/sortable/mouse_6ef99af.js"></script>
<script type="text/javascript" charset="gbk" src="http://static-c.yueus.com/mall/seller/static/pc/modules/common/sortable/sortable_65d00c0.js"></script>
<script type="text/javascript" charset="gbk" src="http://static-c.yueus.com/mall/seller/static/pc/modules/common/upload/1.0.0/yueyue_uploader_f4eddec.js"></script>
</head>
<body>

{global_top_bar}
<iframe id="form_iframe" name="form_iframe" style="display:none;"></iframe>
<form action="./module/pai_mall_certificate_service_op.php" method="post"  name="publish_form" id="publish_form"  target="form_iframe">
    <div class="content">
        <div class="choose-type-page  w1000 font_wryh">
            <!--<div class="mod-choose-step-zone">
                <ul>
                    <li class="cur">
                        <i class="icon-radius ">1</i>
                        <a href="javascript:;" class="step-1" onclick="return false">选择类型</a>
                    </li>
                    <li class="cur">
                        <i class="icon-radius ">2</i>
                        <a href="javascript:;" class="step-2" onclick="return false">服务标准</a>
                    </li>
                    <li>
                        <i class="icon-radius ">3</i>
                        <a href="javascript:;" class="step-3" onclick="return false">开通</a>
                    </li>
                </ul>
            </div>-->
            <div class="mod-nav-item">
                <a href="./">约约商家主页</a>
                &gt;
                <a href="./normal_certificate_choose.php">认证中心</a>
                &gt;
                <a href="./normal_certificate_choose.php">品类认证</a>
                &gt;
                <span>{page_type_name}认证</span>
            </div>
            <div class="service-page mod-attest-page content-bg">
                <div class="mod-listItem">
                    <span>{page_type_name}认证</span>
                </div>
                <div class="form-warp" id="form-warp">
                    <div class="item">
                        <div class="mod-form-title">
                            <span>性别</span>
                        </div>
                        <div class="item-con">
                            <div class="mod-radio-item font_wryh clearfix">
                                <!-- BEGIN certificate_common_sex -->
                                <label>
                                    <input type="radio" name="sex" value="{value}" <!-- IF ROWCNT=="0" -->checked="checked"<!-- ENDIF -->/>
                                    {value_name}
                                </label>
                                <!-- END certificate_common_sex -->
                            </div>
                        </div>
                    </div>
                    <div class="item">
                        <div class="mod-form-title">
                            <span>微信/qq</span><span style="color:#aaa">(方便工作人员跟进和了解)</span>
                        </div>
                        <div class="item-con clearfix">
                            <div class="mod-input-item fl">
                                <input tabindex="1"  type="text" class="input-txt input-txt-3 font_wryh" name="weixin_qq" placeholder="微信/qq" valid-rule="**1-30" valid-index='12'/>
                            </div>
                        </div>
                    </div>
                    <div class="item">
                        <div class="mod-form-title">
                            <span>身高</span>
                        </div>
                        <div class="item-con clearfix">
                            <div class="mod-input-item fl">
                                <input tabindex="2"  type="text" class="input-txt input-txt-3 font_wryh" name="height" placeholder="身高" valid-rule="an1-5" valid-index='4'/>
                            </div>
                            <span class="unit fl">CM</span>
                        </div>
                    </div>
                    <div class="item">
                        <div class="mod-form-title">
                            <span>体重</span>
                        </div>
                        <div class="item-con clearfix">
                            <div class="mod-input-item fl">
                                <input tabindex="3"  type="text" class="input-txt input-txt-3 font_wryh" name="weight" placeholder="体重" valid-rule="an1-5" valid-index='5'/>
                            </div>
                            <span class="unit fl">KG</span>
                        </div>
                    </div>
                    <div class="item">
                        <div class="mod-form-title">
                            <span>三围</span>
                        </div>
                        <div class="item-con clearfix">
                            <div class="mod-input-item fl">
                                <input tabindex="3"  type="text" class="input-txt input-txt-3 font_wryh" name="bust" placeholder="胸围"  valid-rule="an1-3" valid-index='6'/>
                            </div>
                            <span class="unit fl mr10">CM</span>
                            <div class="mod-input-item fl">
                                <input tabindex="4"  type="text" class="input-txt input-txt-3 font_wryh" name="waist" placeholder="腰围"  valid-rule="an1-3" valid-index='7'/>
                            </div>
                            <span class="unit fl mr10">CM</span>
                            <div class="mod-input-item fl">
                                <input tabindex="5"  type="text" class="input-txt input-txt-3 font_wryh" name="hips" placeholder="臀围"  valid-rule="an1-3" valid-index='8'/>
                            </div>
                            <span class="unit fl">CM</span>
                        </div>
                    </div>
                    <div class="item">
                        <div class="mod-form-title">
                            <span>CUP</span>
                        </div>
                        <div class="item-con clearfix">
                            <div class="mod-select-item photo-select-item fl mr10">
                                <select name="cup_type[]" class="font_wryh" valid-rule="**1-10" valid-index='9'>
                                    <option value="">请选择</option>
                                    <!-- BEGIN cup_num_array -->
                                    <option value="{cup}">{cup}</option>
                                    <!-- END cup_num_array -->
                                </select>
                            </div>
                            <div class="mod-select-item photo-select-item fl">
                                <select name="cup_type[]" class="font_wryh" valid-rule="**1-10" valid-index='10'>
                                    <option value="">请选择</option>
                                    <!-- BEGIN cup_english_array -->
                                    <option value="{cup}">{cup}</option>
                                    <!-- END cup_english_array -->
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="item">
                        <div class="mod-form-title">
                            <span>自我介绍</span>
                            <span style="padding-left:20px;font-size: 14px;color:#aaa">(本人从事模特行业3年，曾经获得长隆比基尼大赛亚军，以下是我的微博链接：www.weibo.com/***、淘女郎：http://mm.taobao.com/)</span>
                        </div>
                        <div class="item-con">
                            <div class="textarea-item">
                                <textarea name="self_desc" class="textarea-txt font_wryh" placeholder="自我介绍"  valid-rule="**1-1000" valid-index='11' tabindex="6"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="item">
                        <div class="mod-form-title">
                            <span>作品上传</span>
                            <span style="padding-left:20px;font-size: 14px;color:#aaa">（上传5到20张图片，能让工作人员更好的了解你。文件格式为jpg、jpeg、png，每张图片大小不超过3M）</span>
                        </div>
                        <div class="item-con">
                            <div class="J_upload-container_1 ui-item" style="overflow:hidden;" >

                            </div>
                        </div>
                    </div>
                    <div class="btn-item">
                        <a href="javascript:;" class="ui-btn ui-btn-blue" id="J_form_submit" data-lock="unlock">提交审核</a>
                    </div>
                    <div style="text-align:center;color:#333;padding-top:10px;font-size:16px">等待审核过程中，可先发布服务</div>
                    <div style="text-align:center;color:#333;padding-top:10px;font-size:14px">若有问题，请联系客服4000-82-9003</div>
                </div>
            </div>
        </div>
    </div>
    <input type="hidden" value="{type_id}" name="type_id"/>

</form>
<input type="hidden" value="{user_id}" id="J_user_id">
{footer}

<script type="text/javascript" src="http://static.yueus.com/yue_ui/upload/1.0.0/webuploader.min.js"></script>
<script type="text/javascript">
// 头部
require('common/global-top-bar/global-top-bar');

require('common/layer/layer');

//地区选择组件
var SelectLocal = require('common/widget/selectlocal/selectlocal');
new SelectLocal('#province-1', '#city-1');

//初始化作品上传
require('common/upload/1.0.0/yueyue_uploader');



// 表达验证类
var VA = require('common/valid/index');
// 设置容器
var valid = new VA($('#form-warp'));

add_collection("J_upload-container_1","1");


function error_tips(ele,str)
{
    $("html,body").animate({scrollTop:ele.offset().top},300);
    layer.alert(str);
    return false;
}



fresh_bind();

function fresh_bind(){
    //绑定事件
    valid.pushfunctions
            ([
                {
                    index:'4',
                    ValidError : function(){
                        error_tips($("[valid-index='4']").parents(".item"),'请正确填写身高');
                    }
                },
                {
                    index:'5',
                    ValidError : function(){
                        error_tips($("[valid-index='5']").parents(".item"),'请正确填写体重');
                    }
                },
                {
                    index:'6',
                    ValidError : function(){
                        error_tips($("[valid-index='6']").parents(".item"),'请正确填写胸围，为数字');
                    }
                },
                {
                    index:'7',
                    ValidError : function(){
                        error_tips($("[valid-index='7']").parents(".item"),'请正确填写腰围，为数字');
                    }
                },
                {
                    index:'8',
                    ValidError : function(){
                        error_tips($("[valid-index='8']").parents(".item"),'请正确填写臀围，为数字');
                    }
                },
                {
                    index:'9',
                    ValidError : function(){
                        error_tips($("[valid-index='9']").parents(".item"),'请选择CUP数据');
                    }
                },
                {
                    index:'10',
                    ValidError : function(){
                        //console.log($(this))
                        error_tips($("[valid-index='10']").parents(".item"),'请选择CUP');
                    }
                },
                {
                    index:'11',
                    ValidError : function(){
                        error_tips($("[valid-index='11']").parents(".item"),'请正确填入自我介绍');
                    }
                },
                {
                    index:'12',
                    ValidError : function(){
                        error_tips($("[valid-index='12']").parents(".item"),'请正确填入微信或者QQ');
                    }
                }

            ]);
}

//提交form
$("#J_form_submit").on("click",function(){



    //获取验证结果
    var resault = valid.checkValid();

    if(resault.isPass)
    {
        //限制身高，体重，三围
        if($("[valid-index='4']").val())
        {
            var tmp_height = parseInt($("[valid-index='4']").val());
            if(tmp_height>220)
            {
                error_tips($("[valid-index='4']").parents(".item"),'身高不能大于220');
                return
            }
        }
        if($("[valid-index='5']").val())
        {
            var tmp_height = parseInt($("[valid-index='5']").val());
            if(tmp_height>150)
            {
                error_tips($("[valid-index='5']").parents(".item"),'体重不能大于150KG');
                return
            }
        }
        if($("[valid-index='6']").val())
        {
            var tmp_height = parseInt($("[valid-index='6']").val());
            if(tmp_height>200)
            {
                error_tips($("[valid-index='6']").parents(".item"),'胸围不能大于200');
                return
            }
        }
        if($("[valid-index='7']").val())
        {
            var tmp_height = parseInt($("[valid-index='7']").val());
            if(tmp_height>200)
            {
                error_tips($("[valid-index='7']").parents(".item"),'腰围不能大于200');
                return
            }
        }
        if($("[valid-index='8']").val())
        {
            var tmp_height = parseInt($("[valid-index='8']").val());
            if(tmp_height>200)
            {
                error_tips($("[valid-index='8']").parents(".item"),'臀围不能大于200');
                return
            }
        }


        //判断图片
        if(!$(".J_upload-container_1 input").val())
        {
            error_tips($('.J_upload-container_1').parents(".item"), '请传入作品');
            return
        }
        //判断图片张数是否够5张
        if($(".J_upload-container_1 input").val())
        {
            var img_len = $(".J_upload-container_1 input").length;
            if(img_len<5)
            {
                error_tips($('.J_upload-container_1').parents(".item"), '请传入大于等于5张作品图');
                return
            }
        }


        var data_lock = $(this).attr("data-lock");
        if(data_lock!="lock")
        {
            $(this).attr("data-lock","lock");//锁住
            layer.msg("正在提交中...");
            $("#publish_form").submit();
        }
        else
        {
            layer.msg("正在提交中...");
            return false;
        }
    }

})



//添加作品集
/*
 *ele_container:容器
 *part_id：模块标记值
 */
function add_collection(ele_container,part_id)
{
    $(function()
    {


        //todo 使用之前要确定userid是否传递进去
        var user_id = $("#J_user_id").val();
        var yue_upload_obj = new yue_upload_class
        ({
            upload_total_limit : 20,
            upload_container : $('.'+ele_container),
            user_id :  user_id,
            multiple : true,
            imgs : [],
            fileSizeLimit: 60 * 1024 * 1024,    // 60 M 总文件大小
            fileSingleSizeLimit: 3 * 1024 * 1024,    // 3 M 单文件大小
            gid : part_id
        });

        $('#popup_'+part_id).on('click', function()
        {
            var upload_obj ={};
            first_layer = layer.open
            ({
                type: 1,
                area: ['800px', '450px'],
                fix: false, //不固定
                title:'上传图片',
                maxmin: false,
                content: yue_upload_obj.tpl,
                success : function($el,index)
                {
                    var sec_layer = null;
                    var index = index;


                    setTimeout(function()
                    {
                        upload_obj = yue_upload_obj.init_upload($el);

                        upload_obj.on('uploadProgress',function()
                        {

                        })
                                .on('fileQueued',function(file)
                                {

                                })
                                .on('fileDequeued',function(file)
                                {

                                })
                                .on('uploadSuccess',function(file,response)
                                {
                                    // response 服务端返回数据
                                    //console.log(response);
                                })
                                .on('uploadError',function()
                                {

                                })
                                .on('uploadFinished',function()
                                {
                                    layer.close(index);
                                })
                    },500);
                },
                cancel : function()
                {
                    if(!confirm('注意！关闭弹窗会终止上传图片'))
                    {
                        return false;
                    }

                    upload_obj && upload_obj.stop(true);
                }
            });
        });
    });
}

</script>



</body>
</html>