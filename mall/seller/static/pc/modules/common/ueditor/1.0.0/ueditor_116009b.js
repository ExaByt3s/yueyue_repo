define("common/ueditor/1.0.0/ueditor",function(e){!function(){function t(e,t,o,i,a,r,l){var n;switch(l){case"image":n="<img "+(i?'id="'+i+'"':"")+' width="'+t+'" height="'+o+'" _url="'+e+'" class="'+r.replace(/\bvideo-js\b/,"")+'" src="'+me.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" style="background:url('+me.options.UEDITOR_HOME_URL+"themes/default/images/videologo.gif) no-repeat center center; border:1px solid gray;"+(a?"float:"+a+";":"")+'" />';break;case"embed":n='<div class="previewMsg"><span>输入的视频地址有误，请检查好再重试</span></div><embed type="application/x-shockwave-flash" class="previewVideo" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+e+'" width="'+t+'" height="'+o+'"'+(a?' style="float:'+a+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >';break;case"video":var d=e.substr(e.lastIndexOf(".")+1);"ogv"==d&&(d="ogg"),n="<video"+(i?' id="'+i+'"':"")+' class="'+r+' video-js" '+(a?' style="float:'+a+'"':"")+' controls preload="none" width="'+t+'" height="'+o+'" src="'+e+'" data-setup="{}"><source src="'+e+'" type="video/'+d+'" /></video>'}return n}function o(e){return e?e=UE.utils.trim(e).replace(/v\.youku\.com\/v_show\/id_([\w\-=]+)\.html/i,"player.youku.com/player.php/sid/$1/v.swf").replace(/(www\.)?youtube\.com\/watch\?v=([\w\-]+)/i,"www.youtube.com/v/$2").replace(/youtu.be\/(\w+)$/i,"www.youtube.com/v/$1").replace(/v\.ku6\.com\/.+\/([\w\.]+)\.html.*$/i,"player.ku6.com/refer/$1/v.swf").replace(/www\.56\.com\/u\d+\/v_([\w\-]+)\.html/i,"player.56.com/v_$1.swf").replace(/www.56.com\/w\d+\/play_album\-aid\-\d+_vid\-([^.]+)\.html/i,"player.56.com/v_$1.swf").replace(/v\.pps\.tv\/play_([\w]+)\.html.*$/i,"player.pps.tv/player/sid/$1/v.swf").replace(/www\.letv\.com\/ptv\/vplay\/([\d]+)\.html.*$/i,"i7.imgs.letv.com/player/swfPlayer.swf?id=$1&autoplay=0").replace(/www\.tudou\.com\/programs\/view\/([\w\-]+)\/?/i,"www.tudou.com/v/$1").replace(/v\.qq\.com\/cover\/[\w]+\/[\w]+\/([\w]+)\.html/i,"static.video.qq.com/TPout.swf?vid=$1").replace(/v\.qq\.com\/.+[\?\&]vid=([^&]+).*$/i,"static.video.qq.com/TPout.swf?vid=$1").replace(/my\.tv\.sohu\.com\/[\w]+\/[\d]+\/([\d]+)\.shtml.*$/i,"share.vrs.sohu.com/my/v.swf&id=$1"):""}function i(e){var t=this;return t instanceof i?("string"==typeof e.target&&(e.target=$(e.target)[0]),t.config=$.extend(!0,{},d,e),t.editor,void t._init()):new i(e)}e("common/ueditor/1.0.0/ueditor.config"),e("common/ueditor/1.0.0/ueditor.all"),e("common/upload/1.0.0/yueyue_uploader");var a=e("common/utility/index"),r=e("common/cookie/index");if(/test/.test(window.location.href))var l="http://static.yueus.com/mall/seller/test/static/pc/modules/common/ueditor/1.0.0/ueditor.js".split("/");else var l="http://static-c.yueus.com/mall/seller/static/pc/modules/common/ueditor/1.0.0/ueditor.js".split("/");l.pop(),l=l.join("/");var n=document,d={target:"",toolbars:[],autoFocus:!1,autoHeight:!1,zIndex:1},s={_init:function(){{var e=this,t=e.config,o=n.createElement("div");$.inArray("simpleupload",t.toolbars)}e._setup_btn(),t.toolbars&&(t.toolbars=[t.toolbars]),t.content||(t.content=$(t.target).html()),$(o).insertBefore(t.target),e._initEditor(),e.editor.render(o),t.target.style.display="none"},_setup_btn:function(){var e=this;e._setup_simple_upload_btn(),e._setup_video_upload_btn()},_setup_video_upload_btn:function(){UE.registerUI("video-upload",function(e,i){e.registerCommand(i,{execCommand:function(){}});var a=new UE.ui.Button({name:"videoupload",title:"视频上传",onclick:function(){layer.open({type:1,area:["600px","430px"],fix:!1,title:"上传视频",maxmin:!1,content:'<div class="edit-video-wrapper "><div id="videoTab"><div id="tabBodys" class="tabbody"><div id="video" class="panel focus"><table><tbody><tr><td><label for="videoUrl" class="url">视频网址</label></td><td><input id="videoUrl" type="text" /></td></tr></tbody></table><div id="preview"></div><div id="videoInfo"><fieldset><legend>视频尺寸</legend><table><tbody><tr><td><label for="videoWidth">宽度</label></td><td><input class="txt" id="videoWidth" type="text" /></td></tr><tr><td><label for="videoHeight">高度</label></td><td><input class="txt" id="videoHeight" type="text" /></td></tr></tbody></table></fieldset></div></div></div><div class="video-upload-btn-container clearfix"><button class="upload-btn confirm" data-role="confirm-video">确定</button><button class="upload-btn cancel" data-role="close-video">关闭</button></div></div></div>',success:function(i,a){console.log(i),i.find('[data-role="confirm-video"]').on("click",function(){var t=i.find("#videoUrl").val(),o=i.find("#videoWidth").val(),r=i.find("#videoHeight").val();if(!t)return void alert("请输入视频地址");if(!/http:\/\/[A-Za-z0-9\.-]{3,}\.[A-Za-z]{3}/.test(t))return void alert("不能输入非法地址");var l={url:t,width:parseInt(o)||420,height:parseInt(r)||280};e.execCommand("insertvideo",l),layer.close(a)}),i.find("#videoUrl").on("propertychange input",function(){var e=i.find("#videoUrl").val();e&&(e=o(e),i.find("#preview").html(t(e,420,280,"","","","embed")))}),i.find('[data-role="close-video"]').on("click",function(){layer.close(a)})},cancle:function(){}})}});return a})},_setup_simple_upload_btn:function(){var e=this;UE.registerUI("simple-upload",function(t,o){t.registerCommand(o,{execCommand:function(){var t=new yue_upload_class({upload_total_limit:9,upload_container:!1,user_id:r.get("yue_member_id"),multiple:!0,imgs:[],sortable:!1,fileSizeLimit:28311552,fileSingleSizeLimit:3145728,gid:1}),o={};first_layer=layer.open({type:1,area:["800px","450px"],fix:!1,title:"上传图片",maxmin:!1,content:t.tpl,success:function(i,r){var r=r;setTimeout(function(){o=t.init_upload(i),o.on("uploadProgress",function(){}).on("fileQueued",function(){}).on("error",function(e){switch(e){case"Q_EXCEED_NUM_LIMIT":alert("上传文件数量超出上限了");break;case"Q_EXCEED_SIZE_LIMIT":alert("上传文件大小超出上限了");break;case"Q_TYPE_DENIED":alert("上传文件类型格式错误");break;case"F_EXCEED_SIZE":alert("上传文件大小超出上限了");break;case"F_DUPLICATE":alert("重复上传了"),o.reset();break;default:alert("上传错误")}}).on("uploadSuccess",function(t,i){try{console.log(i);var r=i.url[0]||"";r&&(r=a.matching_img_size(r,""));var l=t.id;e.editor.execCommand("inserthtml",'<img class="loadingclass" id="'+l+'" src="http://static-c.yueus.com/mall/seller/static/pc/modules/common/ueditor/1.0.0/themes/default/images/spacer_df3e567.gif" >');var n=e.editor.document.getElementById(l),d=new Image;d.src=r,d.onload=function(){return n?(n.setAttribute("src",r),n.setAttribute("_src",r),n.removeAttribute("id"),void $(n).removeClass("loadingclass")):void o.stop(!0)}}catch(s){console.log(s)}}).on("uploadError",function(){}).on("uploadFinished",function(){o.reset(),layer.close(r)})},300)},cancel:function(){return confirm("注意！关闭弹窗会终止上传图片")?void(o&&o&&o.stop(!0)):!1}})}});var i=new UE.ui.Button({name:"simpleupload",title:"图片上传",onclick:function(){t.execCommand(o)}});return i})},_initEditor:function(){var e=this,t=e.config;e.editor=new baidu.editor.ui.Editor({initialContent:t.content,enterTag:"p",toolbars:t.toolbars,initialFrameHeight:320,minFrameHeight:300,autoHeightEnabled:t.autoHeight,autoFloatEnabled:!0,serialize:function(){return e._serializeConfig()},elementPathEnabled:!1,wordCount:!1,sourceEditor:"textarea",imagePopup:!1,focus:t.autoFocus,zIndex:t.zIndex})}};$.extend(i.prototype,s),window.Ueditor=i}()});