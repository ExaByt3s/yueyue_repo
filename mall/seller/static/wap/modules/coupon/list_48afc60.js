define("coupon/list",function(e,a,t){"use strict";var n=e("common/utility/index"),o=e("components/zepto/zepto.js"),i=e("components/fastclick/fastclick.js"),s=(e("yue_ui/frozen"),e("common/I_APP/I_APP")),r=Handlebars.template(function(e,a,t,n,o){function i(e,a,n){var o,i,d="";return d+='\r\n    <div class="widget-coupon ',o=t["if"].call(e,e&&e._class_for_available,{hash:{},inverse:_.program(4,r,a),fn:_.program(2,s,a),data:a}),(o||0===o)&&(d+=o),d+=" ",o=t["if"].call(e,n&&n.no_choose_btn,{hash:{},inverse:_.noop,fn:_.program(6,c,a),data:a}),(o||0===o)&&(d+=o),d+='" data-coupon_sn="',(i=t.coupon_sn)?o=i.call(e,{hash:{},data:a}):(i=e&&e.coupon_sn,o=typeof i===u?i.call(e,{hash:{},data:a}):i),d+=h(o)+'">\r\n        <div class="left-border">\r\n            <div class="inside"></div>\r\n        </div>\r\n        <div class="price" data-role="to_ticket_details_price">\r\n            <div class="type">',(i=t.scope_module_type_name)?o=i.call(e,{hash:{},data:a}):(i=e&&e.scope_module_type_name,o=typeof i===u?i.call(e,{hash:{},data:a}):i),d+=h(o)+'</div>\r\n            <div class="contain">\r\n                <div class="contain-left">',(i=t.coin)?o=i.call(e,{hash:{},data:a}):(i=e&&e.coin,o=typeof i===u?i.call(e,{hash:{},data:a}):i),d+=h(o)+'</div>\r\n                <div class="contain-right">',(i=t.face_value)?o=i.call(e,{hash:{},data:a}):(i=e&&e.face_value,o=typeof i===u?i.call(e,{hash:{},data:a}):i),d+=h(o)+'</div>\r\n            </div>\r\n        </div>\r\n        <div class="split">\r\n            <div class="top"></div>\r\n            <div class="mid"><div class="mid-in"></div></div>\r\n            <div class="bottom"></div>\r\n        </div>\r\n        <div class="details" data-role="to_ticket_details">\r\n            <div class="notice">',(i=t.batch_name)?o=i.call(e,{hash:{},data:a}):(i=e&&e.batch_name,o=typeof i===u?i.call(e,{hash:{},data:a}):i),(o||0===o)&&(d+=o),d+='</div>\r\n            <div class="date">',(i=t.start_time_str)?o=i.call(e,{hash:{},data:a}):(i=e&&e.start_time_str,o=typeof i===u?i.call(e,{hash:{},data:a}):i),d+=h(o)+"-",(i=t.end_time_str)?o=i.call(e,{hash:{},data:a}):(i=e&&e.end_time_str,o=typeof i===u?i.call(e,{hash:{},data:a}):i),d+=h(o)+'</div>\r\n        </div>\r\n        <div class="choosen_btn" data-role="choosen_btn">\r\n            <div class="tap" data-role="tap">\r\n                <div class="tap-in">\r\n                    <i class="icon icon-right-24x16 fn-hide"></i>\r\n                    <label class="ui-yue-checkbox">\r\n                        <i data-role="cb-btn" class="no-selected" type="checkbox" checked="" ></i>\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="right-border">\r\n            <div class="inside"></div>\r\n        </div>\r\n    </div>\r\n'}function s(){var e="";return e}function r(){return"unavailable"}function c(){return"no_choose_btn"}this.compilerInfo=[4,">= 1.0.0"],t=this.merge(t,e.helpers),o=o||{};var d,l="",_=this,u="function",h=this.escapeExpression;return d=t.each.call(a,a&&a.data,{hash:{},inverse:_.noop,fn:_.programWithDepth(1,i,o,a),data:o}),(d||0===d)&&(l+=d),l+="\r\n"});"addEventListener"in document&&document.addEventListener("DOMContentLoaded",function(){i.attach(document.body)},!1),s.isPaiApp&&s.check_login(function(e){return n.int(e.pocoid)?void 0:void s.openloginpage(function(e){"0000"==e.code&&n.refresh_page()})});var c={};t.exports={render:function(e,a){var t=this;return o.each(a,function(e,t){"available"==t.tab?a[e]=o.extend(!0,{},t,{_class_for_available:!0}):"used"==t.tab?a[e]=o.extend(!0,{},t,{_class_for_used:!0}):"expired"==t.tab&&(a[e]=o.extend(!0,{},t,{_class_for_expired:!0})),c[t.coupon_sn]=t}),e.html(""),e.html(r({data:a})),t.setup_event(),this},refresh:function(){var e=this,a=o.loading({content:"º”‘ÿ÷–..."});n.ajax_request({url:window.$__config.ajax_url.get_user_coupon_list_by_check,type:"GET",data:{module_type:e.module_type,request_id:e.request_id,quotes_id:e.quotes_id,order_total_amount:e.order_total_amount,order_pay_amount:e.order_pay_amount,page:e.page},success:function(t){var n=t.result_data;e.render(e.$container,n.list),a.loading("hide")},error:function(){a.loading("hide"),o.tips({content:"Õ¯¬Á“Ï≥£",stayTime:3e3,type:"warn"})}})},page_back:function(){},init:function(e){var a=this;return a.$container=e.container||{},a.module_type=e.module_type||"",a.request_id=e.request_id||"",a.quotes_id=e.quotes_id||"",a.order_total_amount=e.order_total_amount||"",a.order_pay_amount=e.order_pay_amount||"",a.page=e.page||1,a.refresh(),a},hide:function(){},setup_event:function(){var e=this;o("[data-coupon_sn]").on("click",function(a){var t=o(a.currentTarget),n=t.attr("data-coupon_sn"),i=t.find('[type="checkbox"]');i.hasClass("no-selected")?(o("[data-coupon_sn]").find('[type="checkbox"]').attr("checked","").addClass("no-selected"),i.removeAttr("checked").removeClass("no-selected"),e.selected_coupon=c[n]):(i.attr("checked","").addClass("no-selected"),e.selected_coupon="")})}}});