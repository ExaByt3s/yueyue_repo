<!DOCTYPE html>
<html lang="zh">
<head>
    <title>{title}</title>
    {wap_global_top}
    <link type="text/css" rel="stylesheet" href="http://static.yueus.com/mall/user/test/static/wap/style/act/list_v2.css">
<script type="text/javascript" charset="gbk" src="http://static.yueus.com/mall/user/test/static/wap/lib/lib.js"></script>
<!--script src="../../../../lib/debuggap.js"></script-->
<link type="text/css" rel="stylesheet" href="http://static.yueus.com/mall/user/test/static/wap/modules/common/widget/header/header.css">
<link type="text/css" rel="stylesheet" href="http://static.yueus.com/mall/user/test/static/wap/modules/list/list.css">
<link type="text/css" rel="stylesheet" href="http://static.yueus.com/mall/user/test/static/wap/modules/common/widget/abnormal/main.css">
<script type="text/javascript" charset="gbk" src="http://static.yueus.com/mall/user/test/components/zepto/zepto.js"></script>
<script type="text/javascript" charset="gbk" src="http://static.yueus.com/mall/user/test/static/wap/modules/common/ua/index.js"></script>
<script type="text/javascript" charset="gbk" src="http://static.yueus.com/mall/user/test/static/wap/modules/common/widget/header/main.js"></script>
<script type="text/javascript" charset="gbk" src="http://static.yueus.com/mall/user/test/static/wap/modules/common/cookie/index.js"></script>
<script type="text/javascript" charset="gbk" src="http://static.yueus.com/mall/user/test/static/wap/modules/yue_ui/frozen.js"></script>
<script type="text/javascript" charset="gbk" src="http://static.yueus.com/mall/user/test/static/wap/modules/common/I_APP/I_APP.js"></script>
<script type="text/javascript" charset="gbk" src="http://static.yueus.com/mall/user/test/static/wap/modules/common/utility/index.js"></script>
<script type="text/javascript" charset="gbk" src="http://static.yueus.com/mall/user/test/static/wap/modules/common/widget/abnormal/index.js"></script>
<script type="text/javascript" charset="gbk" src="http://static.yueus.com/mall/user/test/static/wap/modules/common/lazyload/lazyload.js"></script>
<script type="text/javascript" charset="gbk" src="http://static.yueus.com/mall/user/test/static/wap/modules/list/list.js"></script>
<script type="text/javascript" charset="gbk" src="http://static.yueus.com/mall/user/test/static/wap/modules/common/I_WX_SDK/I_WX_SDK.js"></script>
</head>
<body>
<main role="main" class="action-list">
    <section id="global-header"></section>
    <div class="page-view page-container" data-role="page-container">
        <div class="action-list-contain" data-role="action-list-contain">

        </div>
    </div>

    {wap_global_footer}

</main>
</body>
<script>
    var $ = require('components/zepto/zepto.js');
    var header = require('common/widget/header/main');
    var list_item_class = require('list');
    var WeiXinSDK =  require('common/I_WX_SDK/I_WX_SDK');


    $(document).ready(function()
    {
        var header_obj = '';

        var ACTION_AJAX_URL = window.$__ajax_domain+'get_trade_act_list.php';
        var page_params = {page_params}.result_data;
        var action_list = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, functionType="function", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing;

function program1(depth0,data) {
  
  var buffer = "", stack1, helper, options;
  buffer += "\r\n        <a href=\"";
  if (helper = helpers.link) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.link); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "\" data-role=\"items\">\r\n            <div class=\"item\">\r\n                <div class=\"lbox \">\r\n                ";
  stack1 = (helper = helpers.compare || (depth0 && depth0.compare),options={hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data},helper ? helper.call(depth0, (depth0 && depth0.is_finish), "==", 1, options) : helperMissing.call(depth0, "compare", (depth0 && depth0.is_finish), "==", 1, options));
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\r\n                    <i data-lazyload-url=\""
    + escapeExpression((helper = helpers.change_img_size || (depth0 && depth0.change_img_size),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.images), "145", options) : helperMissing.call(depth0, "change_img_size", (depth0 && depth0.images), "145", options)))
    + "\" class=\"lbox-icon img image-img min-height\" style=\"min-height: 100px; !important;\"></i>\r\n                    ";
  stack1 = helpers['if'].call(depth0, (depth0 && depth0.sign), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\r\n                </div>\r\n\r\n                <div class=\"rbox \">\r\n                    <h3 class=\"title color-000 f14\">";
  if (helper = helpers.titles) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.titles); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "</h3>\r\n\r\n                    <p class=\"price color-ff6\">";
  if (helper = helpers.prices) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.prices); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "\r\n                    ";
  stack1 = helpers['if'].call(depth0, (depth0 && depth0.unit), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\r\n                    </p> \r\n                    <p class=\"color-999\">";
  if (helper = helpers.start_time) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.start_time); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "</p>\r\n                    <div class=\"num color-999 f12\">\r\n                        <p>";
  if (helper = helpers.buy_num) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.buy_num); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "</p>\r\n                        <div class=\"layout_box_v act-box-item\">\r\n                            <p class=\"c666 act-seller-name\">";
  if (helper = helpers.seller) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.seller); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "</p>\r\n                            <i class=\"icon icon-act-name\"></i>\r\n                        </div>\r\n                    </div> \r\n                </div>\r\n            </div>\r\n        </a>\r\n    ";
  return buffer;
  }
function program2(depth0,data) {
  
  
  return "\r\n                    <div class=\"boxre\">\r\n                        <i class=\"icon-show\"></i>\r\n                    </div>\r\n                ";
  }

function program4(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\r\n                    <div class=\"ui-tips-list\">\r\n                        <i class=\"ui-tips-content\">";
  if (helper = helpers.sign) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.sign); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "</i>\r\n                        <i class=\"ui-tips-triangle\"></i>\r\n                    </div>\r\n                    ";
  return buffer;
  }

function program6(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\r\n                        <!-- <span class=\"color-999 f12\">/</span> -->\r\n                        <span class=\"color-999 f12\">";
  if (helper = helpers.unit) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.unit); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "</span>\r\n                    ";
  return buffer;
  }

  buffer += "<div class=\"hp\">\r\n    ";
  stack1 = helpers.each.call(depth0, (depth0 && depth0.list), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\r\n</div>\r\n";
  return buffer;
  });

        var list_obj = new list_item_class(
                {
                    ele : $('[data-role="action-list-contain"]'),
                    url : ACTION_AJAX_URL,
                    params : page_params,
                    template : action_list,

                    is_open_lz_opts : false
                })

        list_obj.$el.on('list_render:before',function(event,el,data)
        {
            var is_share = true;
            if(is_share)
            {
                is_share = false;
                /**** 调用微信分享 ****/
                if(data.result_data.share){
                    if (WeiXinSDK.isWeiXin()) {
                        var share = data.result_data.share;

                        // 朋友圈
                        var WeiXin_data_Timeline =
                            {
                                title  : share.title, // 分享标题
                                link   : share.url, // 分享链接
                                imgUrl : share.img, // 分享图标
                                success: function () {
                                    // 用户确认分享后执行的回调函数
                                },
                                cancel : function () {
                                    // 用户取消分享后执行的回调函数
                                }
                            };

                        // 好友、QQ
                        var WeiXin_data =
                            {
                                title  : share.title, // 分享标题
                                desc   : share.content, // 分享描述
                                link   : share.url, // 分享链接
                                imgUrl : share.img, // 分享图标
                                type   : '', // 分享类型,music、video或link，不填默认为link
                                dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
                                success: function () {
                                    // 用户确认分享后执行的回调函数
                                },
                                cancel : function () {
                                    // 用户取消分享后执行的回调函数
                                }
                            };

                        WeiXinSDK.ready(function () {
                            WeiXinSDK.ready(function () {
                                WeiXinSDK.ShareToFriend(WeiXin_data);

                                WeiXinSDK.ShareTimeLine(WeiXin_data_Timeline);

                                WeiXinSDK.ShareQQ(WeiXin_data);
                            });

                        });
                    }
                    /**** 调用微信分享 ****/
                }
            }
            var title = data.result_data.title;
            if(!header_obj)
            {
                // 渲染头部
                header_obj = header.init({
                    ele : $("#global-header"), //头部渲染的节点
                    title: title,
                    header_show : true , //是否显示头部
                    mt_0_ele : $('#seller-detail-page'), //如果头部隐藏，要把当前页节点margin-top改为0
                    right_icon_show : false, //是否显示右边的按钮
                    share_icon :
                    {
                        show :false,  //是否显示分享按钮icon
                        content:""
                    },
                    omit_icon :
                    {
                        show :false,  //是否显示三个圆点icon
                        content:""
                    },
                    show_txt :
                    {
                        show :true,  //是否显示文字
                        content:"编辑"  //显示文字内容
                    }
                }); 

                document.title = title;
            }   
        });
    });

</script>
</html>
