define("cetificate",function(t){"use strict";var e=t("components/zepto/zepto.js"),a=t("components/fastclick/fastclick.js"),n=(t("yue_ui/frozen"),t("common/I_APP/I_APP")),i=t("common/utility/index"),o=t("common/widget/header/main");"addEventListener"in document&&document.addEventListener("DOMContentLoaded",function(){a.attach(document.body)},!1),function(t,e){function a(t){t=t||{},n.isPaiApp&&n.upload_img("multi_img",{is_async_upload:0,max_selection:1,is_zip:1},function(e){var a=e.imgs[0].url;t.img_obj.attr("src",a);var n=i.matching_img_size(a,"320"),o=new Image;o.src=n,o.onload=function(){var e=this.width,a=this.height,o=i.get_view_port_width()-30,s=o*a/e;t.img_obj.attr("src",n).css("min-height",s+"px")}})}var s=t({}),c=t("#lv").val();e.__cetificate_tips&&alert(e.__cetificate_tips);var r=function(){var t=this;t.init()};r.prototype={init:function(){var e=this;o.init({ele:t("#global-header"),title:"V2等级认证",header_show:!0,right_icon_show:!1,share_icon:{show:!1,content:""},omit_icon:{show:!1,content:""},show_txt:{show:!1,content:"编辑"}}),e.setup_event()},setup_event:function(){var n=t('[data-role="btn-shoot"]'),o=t('[data-role="btn-shoot-retry"]'),c=t('[data-role="photo"]'),r=t('[data-role="form"]'),l=t('[data-role="submit-v2"]');s.$loading={},n.on("click",function(){c.addClass("fn-hide"),r.removeClass("fn-hide"),a({img_obj:r.find('[data-role="images"]')})}),o.on("click",function(){a({img_obj:r.find('[data-role="images"]')})}),l.on("click",function(){var a=t('[data-role="name"]'),n=t('[data-role="id"]'),o="";return a.val()||(o="请填写你的真实姓名"),n.val()||(o="请输入你的身份证号"),o?void t.tips({content:o,stayTime:3e3,type:"warn"}):void i.ajax_request({url:e.$__ajax_domain+"add_id.php",data:{name:a.val(),id_code:n.val(),img:r.find('[data-role="images"]').attr("src")},type:"POST",beforeSend:function(){s.$loading=t.loading({content:"发送中..."})},success:function(a){if(s.$loading.loading("hide"),1==a.result_data.code){var n="success";t.tips({content:a.result_data.msg,stayTime:3e3,type:n}),a.result_data.data.url&&(e.location.href=a.result_data.data.url)}else{var n="warn";t.tips({content:a.result_data.msg,stayTime:3e3,type:n})}},error:function(){s.$loading.loading("hide"),t.tips({content:"网络异常",stayTime:3e3,type:"warn"})}})})}};var l=function(){var t=this;t.init()};if(l.prototype={init:function(){var e=this;s.$pay_li=t('[data-role="pay-li"]'),s.$pay_btn=t("#pay-btn"),s.$select_ab_btn=t('[data-role="select-available-balance"]'),s.$recharge_btn=t('[data-role="btn-recharge"]'),s.selected_pay_action_type="alipay_purse",s.can_use_balance=!0,e.setup_event(),o.init({ele:t("#global-header"),title:"V3等级认证",header_show:!0,right_icon_show:!1,share_icon:{show:!1,content:""},omit_icon:{show:!1,content:""},show_txt:{show:!1,content:"编辑"}})},pay_action:function(a,n){var o=t.loading({content:"发送中..."});i.ajax_request({url:e.$__ajax_domain+"pay_recharge.php",data:a,type:"POST",success:function(e){if(o.loading("hide"),e.result_data&&e.result_data.code>0){n.success.call(this,e);var a="success"}else{var a="warn";t.tips({content:e.result_data.message,stayTime:3e3,type:a})}},error:function(){n.error.call(this),o.loading("hide"),t.tips({content:"网络异常",stayTime:3e3,type:"warn"})}})},after_pay_text:function(t){var e="";switch(i.int(t)){case 1:case-2:case-1:e="支付成功";break;case 0:e="其它错误";break;case-3:e="支付失败";break;case-4:e="支付取消"}return e},setup_event:function(){var a=this;s.$pay_li.on("click",function(e){{var a=t(e.currentTarget),n=a.find('[data-role="yes-tag"]');n.hasClass("icon-select-active")}s.$pay_li.find('[data-role="yes-tag"]').removeClass("icon-select-active").addClass("icon-select-no"),n.addClass("icon-select-active").removeClass("icon-select-no");var i=a.attr("data-pay-type");s.selected_pay_action_type=i,s.$select_ab_btn.find('[data-role="yes-tag"]').removeClass("icon-select-active"),s.can_use_balance&&s.$select_ab_btn.find('[data-role="yes-tag"]').addClass("icon-select-active")}),s.$recharge_btn.on("click",function(){if(!s.selected_pay_action_type)return void alert("请选择支付方式");if(confirm("确认支付?")){var o=e.location.href,c={third_code:s.selected_pay_action_type,redirect_url:o,amount:t("#price").val(),type:"recharge"};a.pay_action(c,{success:function(o){var s=o.result_data&&o.result_data.third_code,c=o.result_data&&o.result_data.channel_return,r=o.result_data&&o.result_data.code;if(1==r)switch(s){case"alipay_purse":n.alipay({alipayparams:o.result_data.data,payment_no:o.result_data.payment_no},function(n){var o=i.int(n.result),s=a.after_pay_text(o);t.tips({content:s,stayTime:3e3,type:"success"}),(1==o||-1==o||-2==o)&&(e.location.href=c)});break;case"tenpay_wxapp":n.wxpay(JSON.parse(o.result_data.data),function(n){var o=i.int(n.result),s=a.after_pay_text(o);t.tips({content:s,stayTime:3e3,type:"success"}),(1==o||-1==o||-2==o)&&(e.location.href=c)})}else t.tips({content:"余额支付成功",stayTime:3e3,type:"success"}),e.location.href=c},error:function(){}})}})}},2==c){new r}else{new l}}(e,window)});