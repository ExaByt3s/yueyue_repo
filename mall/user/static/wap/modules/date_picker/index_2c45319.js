define("date_picker/index",function(n){function e(n){if(2!=n.length)throw"range number error";var e=n;if(o(e[0],">",e[1]))throw"range[1] error";for(var r=a(e[1]),t=a(e[0]),i=13-t.mm+12*(r.yy-t.yy-1)+parseInt(r.mm),s=[],d=[],h=0;i>h;h++){for(var l=new Date(t.yy,parseInt(t.mm)-1+h,1),c=new Date(t.yy,parseInt(t.mm)+h,0).getDate(),m=[],u=(l.getDay(),0);c>u;u++){var f=new Date(l.getFullYear(),l.getMonth(),u+1).getDay();m.push({num:u+1,weekday:O[f],week_index:f})}d.push({year:l.getFullYear(),month_data:{num:l.getMonth(),month_num:l.getMonth()+1,cn_name:T[l.getMonth()],en_name:I[l.getMonth()],days:m}})}for(var p=[],y=0;y<d.length;y++)-1==p.indexOf(d[y].year)&&p.push(d[y].year);for(var g=0;g<p.length;g++){for(var v=p[g],_=[],k=0;k<d.length;k++)d[k].year==v&&_.push(d[k].month_data);s.push({year:v,months:_})}return s}function r(){_("main").css("display","inherit"),D.removeClass("show"),A=!1}function t(n){var e=n.getFullYear(),r=n.getMonth()+1,t=n.getDate();return{yy:e,mm:r,dd:t,sign:e+"-"+r+"-"+t}}function a(n){var e,r,t=n,a=t.indexOf("-");if(-1==a||4!=a)throw"DEFAULT_DAY error";return e=t.slice(0,a),t=t.substring(a+1,t.length),r=t,{yy:e,mm:r}}function i(n){var e,r,t,a,i=n,o=i.indexOf("-");if(-1==o||4!=o)throw"DEFAULT_DAY error";if(r=i.slice(0,o),i=i.substring(o+1,i.length),e=i.indexOf("-"),-1==e)throw"DEFAULT_DAY error";return t=i.slice(0,e),i=i.substring(e+1,i.length),a=i,1==t.length&&(t="0"+t),1==a.length&&(a="0"+a),{yy:r,mm:t,dd:a}}function o(n,e,r){var t,a=n,i=r;switch(e){case"<":t=i>a;break;case"==":t=a==i;break;case">":t=a>i;break;case"!=":t=a!=i}return t}function s(n){var e=n;for(key in e)for(y in e[key])if("months"==y)for(m in e[key][y])for(d in e[key][y][m])if("days"==d){for(var r=[],t=0;t<e[key].months[m].days[0].week_index;t++)r.push({empty:"true"});e[key].months[m].days=r.concat(e[key].months[m].days)}return e}function h(n,e){for(var r,t,a,o=n,s=i(e),d=0;d<o.length;d++)if(o[d].year==parseInt(s.yy))for(var h=0;h<o[d].months.length;h++)if(o[d].months[h].num+1==parseInt(s.mm))for(var l=0;l<o[d].months[h].days.length;l++)if(o[d].months[h].days[l].num==parseInt(s.dd)){r=d,t=h,a=l,o[d].months[h].days[l].choosen="un_choose";break}return o}function l(n,e){var r=i(n),o=a(e[0]),s=a(e[1]),d=new Date(o.yy,parseInt(o.mm)-1,1),h=new Date(s.yy,s.mm,0),l=new Date(r.yy,parseInt(r.mm)-1,r.dd),c=[];return l.getTime()<d.getTime()||c.push(d.getTime()<l.getTime()&&l.getTime()<h.getTime()?t(d).sign+"~"+t(l).sign:t(d).sign+"~"+t(h).sign),c}function c(n,e){for(var r,t,a,o=e,s=i(n),d=0;d<o.length;d++)if(o[d].year==parseInt(s.yy))for(var h=0;h<o[d].months.length;h++)if(o[d].months[h].num+1==parseInt(s.mm))for(var l=0;l<o[d].months[h].days.length;l++)if(o[d].months[h].days[l].num==parseInt(s.dd)){r=d,t=h,a=l,o[d].months[h].days[l].is_default="default";break}return o}function u(n){var e=n,r=e.indexOf("~");if(-1==r)throw"Sign_range ~ error!";var t=e.substring(0,r),a=e.substring(r+1,e.length);return 9==t.length&&(t=f(t)),9==a.length&&(a=f(a)),[t,a]}function f(n){var e=n,r=e.indexOf("-"),t=e.substring(0,r+1),a=e.substring(r+1,e.length);return t+"0"+a}function p(n){for(var e=[],r=0;r<n.length;r++)if(-1!=n[r].indexOf("~")){for(var a=u(n[r]),o=i(a[0]),s=i(a[1]),d=(new Date(o.yy,o.mm,o.dd),new Date(s.yy,parseInt(s.mm)-1,s.dd)),h=t(d),l=0;t(new Date(o.yy,parseInt(o.mm)-1,parseInt(o.dd)+l)).sign!=h.sign;l++)e.push(t(new Date(o.yy,parseInt(o.mm)-1,parseInt(o.dd)+l)).sign);e.push(h.sign)}else e.push(n[r]);return e}function g(n){var r=new Date,a=t(new Date),i=t(new Date(r.getFullYear(),r.getMonth(),r.getDate()-1)),o=n.CAN_NOT_CHOOSE_A_DAY_BEFORE||!1,d=n.CHOOSE_PAST_DAYS||!1,m=n.DEFAULT_DAY||a.sign,u=n.MONTH_RANGE||["2015-01","2015-12"],f=(n.RETURN_SEPARATOR||"-",n.SKIP_DAYS||[]),y=e(u);y=s(y);var g=p(f);if(0!=g.length)for(var _=0;_<g.length;_++)y=h(y,g[_]);if(o){var k=p(l(o,u));if(0!=k.length)for(var _=0;_<k.length;_++)y=h(y,k[_])}if(!d){var D=p(l(i.sign,u));if(0!=D.length)for(var _=0;_<D.length;_++)y=h(y,D[_])}y=c(m,y);var A=w({tree:y});b.html(A),v()}function v(){_('[data-role-picker-day-tap="day"]').on("click",function(){_(".now_pick").removeClass("now_pick"),_(this).addClass("now_pick")}),_('[data-role="confirm_day"]').on("click",function(){var n=_(this).parents(".now_pick").attr("data-the-day");D.trigger("finish",[n])})}var _=n("components/zepto/zepto.js"),k=Handlebars.template(function(n,e,r,t,a){return this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,n.helpers),a=a||{},'<div class="poco-date-picker fn-hide" data-role="poco-date-picker" >\r\n    <div class="picker-header">\r\n        <h1>日历</h1>\r\n        <div class="picker-return fn-hide" data-role="poco-date-picker-return"><i class="nok"></i></div>\r\n    </div>\r\n    <ul class="week_day">\r\n        <li>日</li>\r\n        <li>一</li>\r\n        <li>二</li>\r\n        <li>三</li>\r\n        <li>四</li>\r\n        <li>五</li>\r\n        <li>六</li>\r\n    </ul>\r\n    <div class="days" data-role="picker-days"></div>\r\n</div>'}),w=Handlebars.template(function(n,e,r,t,a){function i(n,e){var t,a="";return a+='\r\n    <div class="picker-year">\r\n        ',t=r.each.call(n,n&&n.months,{hash:{},inverse:p.noop,fn:p.programWithDepth(2,o,e,n),data:e}),(t||0===t)&&(a+=t),a+="\r\n    </div>\r\n"}function o(n,e,t){var a,i,o="";return o+='\r\n            <div class="picker-month">\r\n                <div class="month_title">'+f((a=t&&t.year,typeof a===u?a.apply(n):a))+"年",(i=r.month_num)?a=i.call(n,{hash:{},data:e}):(i=n&&n.month_num,a=typeof i===u?i.call(n,{hash:{},data:e}):i),o+=f(a)+'月</div>\r\n                <div class="days_contain">\r\n                    ',a=r.each.call(n,n&&n.days,{hash:{},inverse:p.noop,fn:p.programWithDepth(3,s,e,n,t),data:e}),(a||0===a)&&(o+=a),o+="\r\n                </div>\r\n            </div>\r\n        "}function s(n,e,t,a){var i,o,s="";return s+='\r\n                        <div class="picker-day ',i=r["if"].call(n,n&&n.choosen,{hash:{},inverse:p.noop,fn:p.program(4,d,e),data:e}),(i||0===i)&&(s+=i),s+=" ",i=r["if"].call(n,n&&n.is_default,{hash:{},inverse:p.noop,fn:p.program(6,h,e),data:e}),(i||0===i)&&(s+=i),s+='" ',i=r["if"].call(n,n&&n.num,{hash:{},inverse:p.noop,fn:p.programWithDepth(8,l,e,t,a),data:e}),(i||0===i)&&(s+=i),s+='>\r\n                            <div class="num">',(o=r.num)?i=o.call(n,{hash:{},data:e}):(o=n&&n.num,i=typeof o===u?o.call(n,{hash:{},data:e}):o),s+=f(i)+'</div>\r\n                            <div class="confirm_tag">\r\n                                <div class="txt" data-role="confirm_day">确定</div>\r\n                                <div class="delta"></div>\r\n                            </div>\r\n                        </div>\r\n                    '}function d(){return"unchoose"}function h(){return"now_pick"}function l(n,e,t,a){var i,o,s="";return s+='data-the-day="'+f((i=a&&a.year,typeof i===u?i.apply(n):i))+"-"+f((i=t&&t.month_num,typeof i===u?i.apply(n):i))+"-",(o=r.num)?i=o.call(n,{hash:{},data:e}):(o=n&&n.num,i=typeof o===u?o.call(n,{hash:{},data:e}):o),s+=f(i)+'" ',i=r.unless.call(n,n&&n.choosen,{hash:{},inverse:p.noop,fn:p.program(9,c,e),data:e}),(i||0===i)&&(s+=i),s}function c(){return'data-role-picker-day-tap="day"'}this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,n.helpers),a=a||{};var m,u="function",f=this.escapeExpression,p=this;return m=r.each.call(e,e&&e.tree,{hash:{},inverse:p.noop,fn:p.program(1,i,a),data:a}),m||0===m?m:""});_("body").append(k({title:"测试呢"}));var D=_('[data-role="poco-date-picker"]'),b=_('[data-role="picker-days"]'),A=!1,I=["January","February","March","April","May","June","July","August","September","October","November","December"],T=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],O=["周日","周一","周二","周三","周四","周五","周六"];return g.prototype.get_obj=function(){return D},g.prototype.slide_show=function(){window.location.hash="#date",_("main").css("display","none"),D.removeClass("fn-hide"),setTimeout(function(){D.addClass("show"),A=!0},0)},g.prototype.slide_hide=function(){r()},D.on("webkitTransitionEnd",function(){A||D.addClass("fn-hide")}),D.find('[data-role="poco-date-picker-return"]').on("click",function(){window.location.hash="",r()}),g});