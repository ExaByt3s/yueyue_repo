define("coupon/list",function(a,e,n){"use strict";var t=a("common/utility/index"),o=a("components/zepto/zepto.js"),s=a("components/fastclick/fastclick.js"),r=(a("yue_ui/frozen"),a("common/I_APP/I_APP")),i=Handlebars.template(function(a,e,n,t,o){function s(a,e,t){var o,s,l="";return l+='\r\n    <div class="widget-coupon ',o=n["if"].call(a,a&&a._class_for_available,{hash:{},inverse:h.program(4,i,e),fn:h.program(2,r,e),data:e}),(o||0===o)&&(l+=o),l+=" ",o=n["if"].call(a,t&&t.no_choose_btn,{hash:{},inverse:h.noop,fn:h.program(6,c,e),data:e}),(o||0===o)&&(l+=o),l+='" data-coupon_sn="',(s=n.coupon_sn)?o=s.call(a,{hash:{},data:e}):(s=a&&a.coupon_sn,o=typeof s===p?s.call(a,{hash:{},data:e}):s),l+=u(o)+'">\r\n        <div class="left-border">\r\n            <div class="inside"></div>\r\n        </div>\r\n        <div class="price" data-role="to_ticket_details_price">\r\n            <div class="type">',(s=n.scope_module_type_name)?o=s.call(a,{hash:{},data:e}):(s=a&&a.scope_module_type_name,o=typeof s===p?s.call(a,{hash:{},data:e}):s),l+=u(o)+'</div>\r\n            <div class="contain">\r\n                <div class="contain-left">',(s=n.coin)?o=s.call(a,{hash:{},data:e}):(s=a&&a.coin,o=typeof s===p?s.call(a,{hash:{},data:e}):s),l+=u(o)+'</div>\r\n                <div class="contain-right">',(s=n.face_value)?o=s.call(a,{hash:{},data:e}):(s=a&&a.face_value,o=typeof s===p?s.call(a,{hash:{},data:e}):s),l+=u(o)+'</div>\r\n            </div>\r\n        </div>\r\n        <div class="split">\r\n            <div class="top"></div>\r\n            <div class="mid"><div class="mid-in"></div></div>\r\n            <div class="bottom"></div>\r\n        </div>\r\n        <div class="details" data-role="to_ticket_details">\r\n            <div class="notice">',(s=n.batch_name)?o=s.call(a,{hash:{},data:e}):(s=a&&a.batch_name,o=typeof s===p?s.call(a,{hash:{},data:e}):s),(o||0===o)&&(l+=o),l+='</div>\r\n            <div class="date">',(s=n.start_time_str)?o=s.call(a,{hash:{},data:e}):(s=a&&a.start_time_str,o=typeof s===p?s.call(a,{hash:{},data:e}):s),l+=u(o)+"-",(s=n.end_time_str)?o=s.call(a,{hash:{},data:e}):(s=a&&a.end_time_str,o=typeof s===p?s.call(a,{hash:{},data:e}):s),l+=u(o)+'</div>\r\n        </div>\r\n        <div class="choosen_btn ',o=n["if"].call(a,a&&a.can_select,{hash:{},inverse:h.program(8,d,e),fn:h.program(2,r,e),data:e}),(o||0===o)&&(l+=o),l+='" data-role="choosen_btn">\r\n            <div class="tap" data-role="tap">\r\n                <div class="tap-in">\r\n                    <i class="icon icon-right-24x16 fn-hide"></i>\r\n                    <label class="ui-yue-checkbox">\r\n                        <i data-role="cb-btn" class="no-selected" type="checkbox" checked="" ></i>\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="right-border">\r\n            <div class="inside"></div>\r\n        </div>\r\n    </div>\r\n'}function r(){var a="";return a}function i(){return"unavailable"}function c(){return"no_choose_btn"}function d(){return"fn-hide"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,a.helpers),o=o||{};var l,_="",h=this,p="function",u=this.escapeExpression;return l=n.each.call(e,e&&e.data,{hash:{},inverse:h.noop,fn:h.programWithDepth(1,s,o,e),data:o}),(l||0===l)&&(_+=l),_+="\r\n"}),c=a("common/widget/abnormal/index");"addEventListener"in document&&document.addEventListener("DOMContentLoaded",function(){s.attach(document.body)},!1),r.isPaiApp&&r.check_login(function(a){return t.int(a.pocoid)?void 0:void r.openloginpage(function(a){"0000"==a.code&&t.refresh_page()})});var d={};n.exports={render:function(a,e){var n=this;return o.each(e,function(a,n){"available"==n.tab?e[a]=o.extend(!0,{},n,{_class_for_available:!0}):"used"==n.tab?e[a]=o.extend(!0,{},n,{_class_for_used:!0}):"expired"==n.tab&&(e[a]=o.extend(!0,{},n,{_class_for_expired:!0})),d[n.coupon_sn]=n}),a.html(""),e.length?a.html(i({data:e})):c.render(o('[data-role="coupon-list-container"]')[0],{message:n.message}),n.setup_event(),this},refresh:function(){var a=this,e=o.loading({content:"º”‘ÿ÷–..."}),n={order_sn:a.order_sn,order_total_amount:a.order_total_amount,order_pay_amount:a.order_pay_amount,page:a.page};n=o.extend({},n,a.extend_params,!0),t.ajax_request({url:window.$__config.ajax_url.get_user_coupon_list_by_check,type:"GET",data:n,success:function(n){var t=n.result_data;a.message=t.message,a.render(a.$container,t.list),e.loading("hide")},error:function(){e.loading("hide"),o.tips({content:"Õ¯¬Á“Ï≥£",stayTime:3e3,type:"warn"})}})},page_back:function(){},init:function(a){var e=this;return e.$container=a.container||{},e.order_sn=a.order_sn||"",e.order_total_amount=a.order_total_amount||"",e.order_pay_amount=a.order_pay_amount||"",e.page=a.page||1,e.extend_params=a.extend_params||{},e.can_select=a.can_select||!1,e.refresh(),e},hide:function(){},setup_event:function(){var a=this;o("[data-coupon_sn]").on("click",function(e){var n=o(e.currentTarget),t=n.attr("data-coupon_sn"),s=n.find('[type="checkbox"]');s.hasClass("no-selected")?(o("[data-coupon_sn]").find('[type="checkbox"]').attr("checked","").addClass("no-selected"),s.removeAttr("checked").removeClass("no-selected"),a.selected_coupon=d[t]):(s.attr("checked","").addClass("no-selected"),a.selected_coupon="")})}}});