define("common/utility/index",function(t){function e(t,e){var o="";e=e||"",o=-1!=n.inArray(e,[120,320,165,640,600,145,440,230,260])?"_"+e:"";var i=/^http:\/\/(img|image)\d*(-c|-wap|-d)?(.poco.cn.*|.yueus.com.*)\.jpg|gif|png|bmp/i,a=/_165.jpg|_320.jpg|_640.jpg|_120.jpg|_600.jpg|_145.jpg|_260.jpg|_440.jpg/i;return i.test(t)&&(t=a.test(t)?t.replace(a,o+".jpg"):t.replace("/(.d*).jpg|.jpg|.gif|.png|.bmp/i",o+".jpg")),t}var n=t("components/zepto/zepto.js"),o=n(window),i=window.localStorage,a=t("common/cookie/index"),r=(t("common/ua/index"),t("yue_ui/frozen"),{timeout:1e4});n.extend(n.ajaxSettings,r);var c=parseInt(a.get("yue_member_id")),l=window.location;if(l.origin||(l.origin=l.protocol+"//"+l.hostname+(l.port?":"+l.port:"")),/wifi/.test(l.origin)){l.origin.replace("-wifi","")}else{var s=l.origin.split(".");s[0]+"-wifi."+s[1]+"."+s[2]}window.$_AppCallJSObj=n({}),window._AppCallJSFunc=function(t,e){$_AppCallJSObj.trigger(t,e)},$_AppCallJSObj.on("set_location_cookie",function(t,e){a.set("yue_location_id",e.location_id)});var u={get_view_port_height:function(t){var e=45,n=45,i=o.height();switch(t){case"nav":i-=n;break;case"tab":i-=e;break;case"all":i=i-n-e}return i},get_view_port_width:function(){return o.width()},"int":function(t){return parseInt(t,10)||0},"float":function(t){return parseFloat(t)},format_float:function(t,e){e=e||0;var n=Math.pow(10,e);return Math.round(t*n)/n||0},getHash:function(){return window.location.hash.substr(1)},get_zoom_height_by_zoom_width:function(t,e,n){return parseInt(e*n/t)},storage:{prefix:"poco-yuepai-app-",set:function(t,e){return"undefined"==typeof e?u.storage.remove(t):(i.setItem(u.storage.prefix+t,JSON.stringify(e)),e)},get:function(t){var e=i.getItem(u.storage.prefix+t);return e?JSON.parse(e):e},remove:function(t){return i.removeItem(u.storage.prefix+t)}},is_empty:function(t){var e=typeof t;switch(e){case"undefined":var n=!0;break;case"boolean":var n=!t;break;case"number":if(t>0)var n=!1;else var n=!0;break;case"string":if(""==t||"0">=t&&!isNaN(parseInt(t)))var n=!0;else var n=!1;break;case"object":if(_.isEmpty(t))var n=!0;else if(t instanceof Array)if(0==t.length)var n=!0;else var n=!1;else{var n=!0;for(var o in t)n=!1}break;default:var n=!1}return n},ajax_request:function(t){var t=t||{},e=t.url,o=t.data||{},i=t.cache||!1,a=t.beforeSend||function(){},r=t.success||function(){},c=t.error||function(){},l=t.complete||function(){},s=t.type||"GET",u=t.dataType||"json",d=null==t.async?!0:!1,p=n.ajax({url:e,type:s,data:o,cache:i,async:d,dataType:u,beforeSend:a,success:r,error:c,complete:l});return p=n.extend(p,{xhr_data:o}),console.log(d),p},auth:{is_login:function(){return u.login_id>0}},matching_img_size:function(t,n){var o=n;return e(t,o)},get_url_params:function(t,e){var n=new RegExp("[?&]"+e+"=([^&]+)","i"),o=n.exec(t);return o&&o.length>1?o[1]:""},page_pv_stat_action:function(t){},err_log:function(t,e,n){var t=t||1,e=encodeURIComponent(e)||encodeURIComponent(window.location.href),n=encodeURIComponent(n)||"",o="http://www.yueus.com/mobile_app/log/save_log.php?from_str=app&err_level="+t+"&url="+e,i=new Image;i.src=o+"&err_str="+n},refresh_page:function(){window.location.reload()},dialog:function(t){var t=t||{},e=n.dialog({title:t.title||"",content:t.content||"温馨提示内容",button:t.buttons||["确认","取消"]});return e.on("dialog:action",function(t){0==t.index?e.trigger("confirm",t):e.trigger("cancel",t)}).on("dialog:hide",function(e){t.hide&&t.hide.call(this,e)}).on("dialog:show",function(e){t.show&&t.show.call(this,e)}),e},dialog_show:function(t){var t=t||{},e=t.title||"",o=t.content||"",i=Handlebars.template(function(t,e,n,o,i){function a(t,e){var o,i,a="";return a+="\n                    <h4>",(i=n.title)?o=i.call(t,{hash:{},data:e}):(i=t&&t.title,o=typeof i===s?i.call(t,{hash:{},data:e}):i),a+=u(o)+"</h4>\n                "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=i||{};var r,c,l="",s="function",u=this.escapeExpression,d=this;return l+='<div class="ui-dialog" data-role="ui-dialog">\n    <div class="ui-dialog-cnt">\n        <div class="ui-dialog-bd">\n            <div>\n                ',r=n["if"].call(e,e&&e.title,{hash:{},inverse:d.noop,fn:d.program(1,a,i),data:i}),(r||0===r)&&(l+=r),l+="  \n                <div>",(c=n.content)?r=c.call(e,{hash:{},data:i}):(c=e&&e.content,r=typeof c===s?c.call(e,{hash:{},data:i}):c),l+=u(r)+'</div>\n            </div>\n        </div>\n        <div class="ui-dialog-ft ui-btn-group">\n            <button type="button" data-role="ui-dialog-button"  class="select" >关闭</button> \n        </div>\n    </div>\n</div>'}),a=i({title:e,content:o});n("body").append(a);var r=n("body").find('[data-role="ui-dialog"]');return r.addClass("show"),r.find('[data-role="ui-dialog-button"]').on("click",function(t){t.preventDefault(),n(this).removeClass("show"),r.remove()}),r},ajax_request_app:function(t){var e=this;t=t||{};var o={path:t.path,location_id:t.location_id||e.storage.get("location").location_id,user_id:t.user_id||a.get("yue_member_id")};t.url=t.url||window.$__ajax_common_url,t.data=n.extend(o,t.data),t.type=t.type||"POST",e.ajax_request(t)},get_yue_img_size_from_url:function(t){var e="",n="",o=t.match(/\?(.*)/);if(!o)return{width:e,height:n};if(o[1]){var i=o[1],a=i.match(/(\d+)x(\d+)_(\d+)/);return a[1]&&(e=a[1]),a[2]&&(n=a[2]),{width:e,height:n}}return{width:e,height:n}},$_AppCallJSObj:$_AppCallJSObj,login_id:c||0,location_id:"0"},d=t("common/I_APP/I_APP");d.isPaiApp&&d.closeloading();var p={location_id:101029001,location_name:"广州"},g=u.storage.get("location");return g||u.storage.set("location",p),window.__Util_Tools=u,u});