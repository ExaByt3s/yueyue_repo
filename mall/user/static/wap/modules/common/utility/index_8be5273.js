define("common/utility/index",function(e){function t(e,t){var o="";t=t||"",o=-1!=n.inArray(t,[120,165,640,600,145,440,230,260])?"_"+t:"";var i=/^http:\/\/(img|image)\d*(-c|-wap|-d)?\.poco\.cn.*\.jpg|gif|png|bmp/i,a=/_165.jpg|_640.jpg|_120.jpg|_600.jpg|_145.jpg|_260.jpg|_440.jpg/i;return i.test(e)&&(e=a.test(e)?e.replace(a,o+".jpg"):e.replace("/(.d*).jpg|.jpg|.gif|.png|.bmp/i",o+".jpg")),e}window.onerror=function(e,t,n,o){if("function"==typeof callback)callback({message:e,script:t,line:n,column:o});else{var i="http://www.yueus.com/mobile_app/log/save_log.php?from_str=yue_m2&err_level=2&url="+encodeURIComponent(window.location.href),a=new Image,r=[];r.push("代码有错。。。"),r.push("\n错误信息：",e),r.push("\n出错文件：",t),r.push("\n出错位置：",n+"行，"+o+"列"),-1!=window.location.href.indexOf("predev")?console.log(r.join("")):a.src=i+"&err_str="+encodeURIComponent(r.join(""))}};var n=e("components/zepto/zepto.js"),o=n(window),i=window.localStorage,a=e("common/cookie/index"),r=(e("common/ua/index"),e("yue_ui/frozen"),{timeout:1e4});n.extend(n.ajaxSettings,r);var c=parseInt(a.get("yue_member_id")),l=window.location;if(l.origin||(l.origin=l.protocol+"//"+l.hostname+(l.port?":"+l.port:"")),/wifi/.test(l.origin)){l.origin.replace("-wifi","")}else{var s=l.origin.split(".");s[0]+"-wifi."+s[1]+"."+s[2]}window.$_AppCallJSObj=n({}),window._AppCallJSFunc=function(e,t){$_AppCallJSObj.trigger(e,t)},$_AppCallJSObj.on("set_location_cookie",function(e,t){a.set("yue_location_id",t.location_id)});var p={get_view_port_height:function(e){var t=45,n=45,i=o.height();switch(e){case"nav":i-=n;break;case"tab":i-=t;break;case"all":i=i-n-t}return i},get_view_port_width:function(){return o.width()},"int":function(e){return parseInt(e,10)||0},"float":function(e){return parseFloat(e)},format_float:function(e,t){t=t||0;var n=Math.pow(10,t);return Math.round(e*n)/n||0},getHash:function(){return window.location.hash.substr(1)},get_zoom_height_by_zoom_width:function(e,t,n){return parseInt(t*n/e)},storage:{prefix:"poco-yuepai-app-",set:function(e,t){return"undefined"==typeof t?p.storage.remove(e):(i.setItem(p.storage.prefix+e,JSON.stringify(t)),t)},get:function(e){var t=i.getItem(p.storage.prefix+e);return t?JSON.parse(t):t},remove:function(e){return i.removeItem(p.storage.prefix+e)}},is_empty:function(e){var t=typeof e;switch(t){case"undefined":var n=!0;break;case"boolean":var n=!e;break;case"number":if(e>0)var n=!1;else var n=!0;break;case"string":if(""==e||"0">=e&&!isNaN(parseInt(e)))var n=!0;else var n=!1;break;case"object":if(_.isEmpty(e))var n=!0;else if(e instanceof Array)if(0==e.length)var n=!0;else var n=!1;else{var n=!0;for(var o in e)n=!1}break;default:var n=!1}return n},ajax_request:function(e){var e=e||{},t=e.url,o=e.data||{},i=e.cache||!1,a=e.beforeSend||function(){},r=e.success||function(){},c=e.error||function(){},l=e.complete||function(){},s=e.type||"GET",p=e.dataType||"json",u=null==e.async?!0:!1,d=n.ajax({url:t,type:s,data:o,cache:i,async:u,dataType:p,beforeSend:a,success:r,error:c,complete:l});return d=n.extend(d,{xhr_data:o}),console.log(u),d},auth:{is_login:function(){return p.login_id>0}},matching_img_size:function(e,n){var o=n;return t(e,o)},get_url_params:function(e,t){var n=new RegExp("[?&]"+t+"=([^&]+)","i"),o=n.exec(e);return o&&o.length>1?o[1]:""},page_pv_stat_action:function(e){},err_log:function(e,t,n){var e=e||1,t=encodeURIComponent(t)||encodeURIComponent(window.location.href),n=encodeURIComponent(n)||"",o="http://www.yueus.com/mobile_app/log/save_log.php?from_str=app&err_level="+e+"&url="+t,i=new Image;i.src=o+"&err_str="+n},refresh_page:function(){window.location.reload()},dialog:function(e){var e=e||{},t=n.dialog({title:e.title||"",content:e.content||"温馨提示内容",button:["确认","取消"]});return t.on("dialog:action",function(e){0==e.index?t.trigger("confirm",e):t.trigger("cancel",e)}).on("dialog:hide",function(t){e.hide&&e.hide.call(this,t)}).on("dialog:show",function(t){e.show&&e.show.call(this,t)}),t},dialog_show:function(e){var e=e||{},t=e.title||"",o=e.content||"",i=Handlebars.template(function(e,t,n,o,i){function a(e,t){var o,i,a="";return a+="\n                    <h4>",(i=n.title)?o=i.call(e,{hash:{},data:t}):(i=e&&e.title,o=typeof i===s?i.call(e,{hash:{},data:t}):i),a+=p(o)+"</h4>\n                "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,c,l="",s="function",p=this.escapeExpression,u=this;return l+='<div class="ui-dialog" data-role="ui-dialog">\n    <div class="ui-dialog-cnt">\n        <div class="ui-dialog-bd">\n            <div>\n                ',r=n["if"].call(t,t&&t.title,{hash:{},inverse:u.noop,fn:u.program(1,a,i),data:i}),(r||0===r)&&(l+=r),l+="  \n                <div>",(c=n.content)?r=c.call(t,{hash:{},data:i}):(c=t&&t.content,r=typeof c===s?c.call(t,{hash:{},data:i}):c),l+=p(r)+'</div>\n            </div>\n        </div>\n        <div class="ui-dialog-ft ui-btn-group">\n            <button type="button" data-role="ui-dialog-button"  class="select" >关闭</button> \n        </div>\n    </div>\n</div>'}),a=i({title:t,content:o});n("body").append(a);var r=n("body").find('[data-role="ui-dialog"]');r.addClass("show"),r.find('[data-role="ui-dialog-button"]').on("click",function(e){e.preventDefault(),n(this).removeClass("show"),r.remove()})},ajax_request_app:function(e){var t=this;e=e||{};var o={path:e.path,location_id:e.location_id||t.storage.get("location").location_id,user_id:e.user_id||a.get("yue_member_id")};e.url=e.url||window.$__ajax_common_url,e.data=n.extend(o,e.data),e.type=e.type||"POST",t.ajax_request(e)},$_AppCallJSObj:$_AppCallJSObj,login_id:c||0,location_id:"0"},u=e("common/I_APP/I_APP");u.isPaiApp&&u.closeloading();var d={location_id:101029001,location_name:"广州"},g=p.storage.get("location");return g||p.storage.set("location",d),p});