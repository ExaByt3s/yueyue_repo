define("common/I_APP/I_APP",function(o){var n=o("components/zepto/zepto.js"),c=o("common/utility/index"),l=o("common/ua/index"),i=window.PocoWebViewJavascriptBridge,t="undefined"!=typeof i;l.is_yue_app||(t=!1);var e="yueyue://goto",a="poco.yuepai.";if(t){i.init();var u=n({});window.pocoAppEventTrigger=function(){return u.trigger.apply(u,arguments)}}var s={isPaiApp:t,on:function(){return s.isPaiApp?u.on.apply(u,arguments):void 0},off:function(){return s.isPaiApp?u.off.apply(u,arguments):void 0},once:function(){return s.isPaiApp?u.once.apply(u,arguments):void 0},chat:function(o){i.callHandler(a+"function.chat",o,function(){"function"==typeof o.callback&&o.callback.call(this)})},qrcodescan:function(o){var o=o||{},n=(null==o.is_nav_page?!0:!1,o.success||function(){});i.callHandler(a+"function.qrcodescan",o,function(o){if("0000"==o.code){var l=document.createElement("a");l.href=o.scanresult,window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));var i=l.href.replace(l.origin,window.location.origin);console.log(i),c.ajax_request({url:i,beforeSend:function(){m_alert.show("发送中","right")},success:function(o){var c=o.result_data;m_alert.show(c.msg,"right"),c.code>0&&n.call(this,c)},error:function(){m_alert.show("网络异常","error")}})}})},check_login:function(o){i.callHandler(a+"info.login",{},function(n,c){o.call(this,n,c)})},login:function(o){var o=o||{};i.callHandler(a+"function.login",{pocoid:o.pocoid,username:o.username,icon:o.icon,token:o.token,token_expirein:o.token_expirein},function(){})},logout:function(){console.log("APP logout"),i.callHandler(a+"function.logout",{},function(){})},save_device:function(o,l){var o=o||!1;i.callHandler(a+"info.device",{},function(i){console.log(i),i=n.extend(i,{user_id:c.login_id}),o?"function"==typeof l&&l.call(this,i):c.ajax_request({url:global_config.ajax_url.a_img,data:i})})},get_chat_info:function(o){i.callHandler(a+"info.chat",{},function(n){"function"==typeof o&&o.call(this,n)})},get_login_info:function(o){i.callHandler(a+"info.login",{},function(n){"function"==typeof o&&o.call(this,n)})},alipay:function(o,n){return o?(console.log(o),void i.callHandler(a+"function.alipay",o,function(o){console.log("======支付宝支付回调参数======"),console.log(o),"function"==typeof n&&n.call(this,o)})):void alert("no params")},wxpay:function(o,n){return o?(console.log(o),void i.callHandler(a+"function.wxpay",o,function(o){console.log("======微信支付回调参数======"),console.log(o),"function"==typeof n&&n.call(this,o)})):void alert("no params")},upload_img:function(o,c,l){console.log("upload img");var t="",e=c.photosize||640,u="wifi"==window.APP_NET_STATUS?"-wifi":"";console.log("net status:"+window.APP_NET_STATUS);var s="http://sendmedia"+u+".yueus.com:8078/",r="http://sendmedia"+u+".yueus.com:8079/";if(!c)return void alert("no params");if(!o)return void alert("no type");var f="",p="";switch(o){case"header_icon":t=s+"icon.cgi",f="modify_headicon",p="camera_album";break;case"single_img":t=r+"upload.cgi",p="camera_album";break;case"modify_cardcover":t=r+"upload.cgi",f="modify_cardcover",p="camera_album";break;case"multi_img":t=r+"upload.cgi",p="camera_album"}c=n.extend(c,{url:t,photosize:e,operation:f,src_opts:p}),console.log("-----upload img params-----"),console.log(c),i.callHandler(a+"function.uploadpic",c,function(o){l.call(this,o)})},show_chat_list:function(){i.callHandler(a+"function.openchatlist",{},function(){})},debug:function(o){var n=n||{};n.url=o.cache?global_config.romain:global_config.debug_romain,n.debug=o.debug?1:0,n.cache_onoff=o.cache?1:0,i.callHandler(a+"function.debug",n,function(){})},show_alumn_imgs:function(o){var o=o||{};i.callHandler(a+"function.show_album_imgs",o,function(){})},get_netstatus:function(o){i.callHandler(a+"info.netstatus",{},function(n){console.log("===========调用 App 获取网络状态==========="),console.log(n),"function"==typeof o&&o.call(this,n)})},sso_login:function(o,n){i.callHandler(a+"function.bind_account",o,function(o){"function"==typeof n&&n.call(this,o)})},call_phone:function(o,n){i.callHandler(a+"function.callphone",o,function(o){"function"==typeof n&&n.call(this,o)})},get_gps:function(o,n){i.callHandler(a+"function.getgps",o,function(o){"function"==typeof n&&n.call(this,o)})},set_setting:function(o,n){i.callHandler(a+"function.setting",o,function(o){"function"==typeof n&&n.call(this,o)})},get_setting:function(o,n){i.callHandler(a+"info.setting",o,function(o){console.log(o),"function"==typeof n&&n.call(this,o)})},clear_cache:function(){i.callHandler(a+"function.clearcache",{},function(){})},show_bottom_bar:function(o){console.log("function.showbottombar"),i.callHandler(a+"function.showbottombar",{show:o},function(){})},check_update:function(){i.callHandler(a+"function.checkupdate",{},function(){})},app_back:function(){console.log("调用 App Back Function"),window.AppCanPageBack=!0,i.callHandler(a+"function.back",{},function(){})},app_info:function(o){console.log("App app-info"),i.callHandler(a+"info.app",{},function(n){console.log(n),"function"==typeof o&&o.call(this,n)})},switchtopage:function(o,n){console.log("App switchtopage"),i.callHandler(a+"function.switchtopage",o,function(o){console.log(o),"function"==typeof n&&n.call(this,o)})},share_card:function(o,n){var c=o||{};console.log("share_card请求前参数："+c),i.callHandler(a+"function.sharecard",{url:c.url,pic:c.pic||c.img,content:c.content,title:c.title,sinacontent:c.sinacontent,userid:c.userid,qrcodeurl:c.qrcodeurl,jscbfunc:c.jscbfunc||function(){},sourceid:c.sourceid||0},function(o){console.log("share_card回调："+o),"function"==typeof n&&n.call(this,o)})},analysis:function(o,n,c){var n=n||{},o=o||"";switch(console.log("analysis 请求前参数:"+JSON.stringify(n)),o){case"eventtongji":i.callHandler(a+"function.eventtongji",n,function(o){console.log("analysis 回调数据:"+o),"function"==typeof c&&c.call(this,o)});break;case"moduletongji":i.callHandler(a+"function.moduletongji",n,function(o){console.log("analysis 回调数据:"+o),"function"==typeof c&&c.call(this,o)})}},nav_to_app_page:function(o){var o=o||{},l=o.page_type||"";o.type=o.jump_type||"inner_app";var t=0;switch(l){case"comment":o.goods_id=o.goods_id||"",o.order_sn=o.order_sn||"";var t="1220121";break;case"seller_user":o.seller_user_id=o.seller_user_id||"",o.user_id=c.login_id||"";var t="1220103";break;case"goods":o.goods_id=o.goods_id||"",o.user_id=c.login_id||"";var t="1220102"}if(o.pid=t,!t)return void alert("非法页面参数！无法跳转");delete o.page_type,params_str=n.param(o);var u=e+"?"+params_str;console.log("======== jump app protocol params ========"),console.log(params_str),i.callHandler(a+"function.openlink",{url:u},function(o){console.log("nav_to_app_page 回调数据:"+o),"function"==typeof callback&&callback.call(this,o)})},openloginpage:function(o){console.log("App openloginpage"),i.callHandler(a+"function.openloginpage",{},function(n){console.log(n),"function"==typeof o&&o.call(this,n)})},openttpayfinish:function(o){console.log("App ttpayfinish"),i.callHandler(a+"function.ttpayfinish",{},function(n){console.log(n),"function"==typeof o&&o.call(this,n)})},close_webview:function(o){console.log("App close_webview"),i.callHandler(a+"function.close",{},function(n){console.log(n),"function"==typeof o&&o.call(this,n)})},closeloading:function(o,n){console.log("App closeloading"),i.callHandler(a+"function.closeloading",{},function(o){console.log(o),"function"==typeof n&&n.call(this,o)})},show_selectcity:function(o,n){console.log("App selectcity"),i.callHandler(a+"function.selectcity",{},function(o){console.log(o),"function"==typeof n&&n.call(this,o)})},qrcodeshow:function(o,n,c){console.log("App qrcodeshow"),n=n||0,i.callHandler(a+"function.qrcodeshow",{qrcodes:o,index:n},function(o){console.log(o),"function"==typeof c&&c.call(this,o)})},showtopmenu:function(o,n,c){console.log("App showtopbar"),n=n||{},n.type=o?2:1,i.callHandler(a+"function.showtopbar",n,function(o){console.log(o),"function"==typeof c&&c.call(this,o)})}};return s});