define("common/date/calendar",function(e,t,a){!function(e){var t="undefined"!=typeof window?window:this;"object"==typeof a&&"object"==typeof a.exports?a.exports=t.document?e(t):function(t){if(!t.document)throw new Error("document is a undefined");return e(t)}:e(t)}(function(e){function t(){var e=new Date;this.hours=!1,this.hoursPast=!1,this.focusObj=null,this.shield="[]",this.startDate="",this.startJSON={},this.fixDate={y:e.getFullYear(),m:e.getMonth()+1,d:0},this.init()}function a(e,t){function a(e){function a(e){var a=e.targetTouches?e.targetTouches[0]:e||event;return i=a.pageX-r,j?!1:(Math.abs(i)>=o&&(j=!0,t&&t(c,i)),a.preventDefault&&a.preventDefault(),!1)}function n(){this.ontouchmove&&(this.ontouchmove=null),this.ontouchend&&(this.ontouchend=null),this.onmousemove&&(this.onmousemove=null),this.onmouseup&&(this.onmouseup=null)}var i,s=e.targetTouches?e.targetTouches[0]:e||event,r=s.pageX,o=parseInt(document.documentElement.clientWidth/5,10),c=this;this.ontouchmove=a,this.onmousemove=a,this.ontouchend=n,this.onmouseup=n}e.ontouchstart=a,e.onmousedown=a}function n(e,t,a){if(t){var n=e.className.replace(/\s+/g," ");n=n.split(" "),t=t.replace("^s+|s+$").replace(/\s+/," ").split(" "),a=a||"add";for(var i=0;i<n.length;i++)switch(a){case"has":if(t[0]==n[i])return!0;break;case"add":case"remove":for(var s=0;s<t.length;s++)t[s]==n[i]&&n.splice(i,1)}"add"==a&&(n=n.concat(t)),e.className=n.join(" ")}}function i(e,t){var a,n=t.charAt(0);switch(n){case"#":a=e.getElementById(t.substring(1));break;case".":a=e.getElementsByClassName(t.substring(1));break;default:a=e.getElementsByTagName(t)}return a}function s(e,t,a){if(e){t=t||{},a=a||"";var n=document.createElement(e);for(var i in t)n.setAttribute(i,t[i]);return n.innerHTML=a,n}}function r(){n(O,"close"),setTimeout(function(){n(O,"active close","remove")},290)}function o(e,t){if(!e)return!1;e=e.split("/"),t=t||"y/m/d";for(var a=t.charAt(0),n=0,i=0;i<t.length;i++)a.charAt(n)!=t.charAt(i)&&(a+=t.charAt(i),n++);var s={y:e[0],m:e[1],d:e[2]},r="",o="";/\//g.test(a)?r="/":/\-/g.test(a)&&(r="-"),a=a.split(r);for(var i=0;i<a.length;i++)o+=s[a[i]],i<a.length-1&&(o+=r);return o}function c(e){if(e=e.replace(/[\'\s]+/g,"")){e=e.match(/(\d+[\/\-]\d+[\/\-]\d+)/g);for(var t=[],a=0;a<e.length;a++){var n=e[a].match(/\d+/g),i={};3==n.length?(i.m=n[1],4==n[0].length?(i.y=n[0],i.d=n[2]):(i.d=n[0],i.y=n[2])):2==n.length&&(4==n[0].length?(i.y=n[0],i.m=n[1]):n[0].length<=2&&(i.m=n[0],i.d=n[1])),t.push(i)}return t}}function l(e,t,a){if(!e)return null;switch(arguments.length){case 3:e.setAttribute(t,a);break;case 2:return e.getAttribute(t)}}var h={},d=e,u=d.navigator,p=u.appVersion;h.isMobile=/(iphone|ipod|android|ios|ipad|nokia|blackberry|tablet|symbian)/.test(u.userAgent.toLowerCase()),h.isAndroid=/android/gi.test(p);var v,f,m,y,g,w,b,D,x=0,C=0,j=!1,O=s("div",{"class":"calen-wrap"}),N=s("div",{"class":"calen-mask"}),k=s("div",{"class":"calen"}),T=s("div",{"class":"calen-list"});return t.prototype.init=function(){var e=this,t=i(document,".calendars");if(t.length){document.body.appendChild(O),O.appendChild(N),O.appendChild(k),calenTitle=i(k,".calen-title"),this.createHeader(function(){e.createWeek(),k.appendChild(T),a(T,function(t,a){a>0?x--:x++,e.startJSON.prev.m=x-1,e.startJSON.now.m=x,e.startJSON.next.m=x+1,e.transitions(t,a)});for(var t=0;t<f.length;t++)f[t].onclick=function(){if(n(this,"calen-month-txt","has")){n(D,"active",D.show?"remove":"add"),b.show&&(n(b,"active","remove"),b.show=!1);for(var e=0;e<m.length;e++)l(m[e],"data-value")==l(this,"data-value")?n(m[e],"active"):n(m[e],"active","remove");D.show=!D.show}else if(n(this,"calen-year-txt","has")){n(b,"active",b.show?"remove":"add"),D.show&&(n(D,"active","remove"),D.show=!1);for(var e=0;e<y.length;e++)l(y[e],"data-value")==l(this,"data-value")?n(y[e],"active"):n(y[e],"active","remove");b.show=!b.show}}}),this.createDate({},function(t){for(var a=0;a<m.length;a++)t[a].onclick=function(){for(var a=0;a<t.length;a++)n(t[a],"active","remove");x+=l(this,"data-value")-l(w,"data-value"),e.selectDate(this,D,"m",x)}});for(var s=0;s<t.length;s++)l(t[s],"readonly","true"),t[s].onfocus=function(){if(null==l(this,"disabled")){var t=Number(l(this,"start"))||1915,i=Number(l(this,"end"))||2020;v=!(null==l(this,"past")),e.hours=!(null==l(this,"hours")),e.hoursPast=!(null==l(this,"hours-past")),e.shield=c(l(this,"shield")||""),e.startDate=c(l(this,"start-date")||"");var s,r,o,d=new Date;if(e.startDate instanceof Array&&e.startDate.length){var u=e.startDate[0];C=u.y-d.getFullYear(),x=u.m-(d.getMonth()+1);for(var f in u)e.fixDate[f]=u[f];s={y:C,m:x-1,d:u.d},r={y:C,m:x,d:u.d},o={y:C,m:x+1,d:u.d},e.startJSON={prev:s,now:r,next:o}}else e.fixDate.y=d.getFullYear(),e.fixDate.m=d.getMonth()+1,e.fixDate.d=0;if(e.focusObj!=this&&((!e.startDate instanceof Array||!e.startDate)&&(x=0,C=0,e.startJSON.prev={y:C,m:x-1},e.startJSON.now={y:C,m:x},e.startJSON.next={y:C,m:x+1}),e.appendList(e.startJSON,function(){e.addEvent()}),e.createDate({start:t,end:i,type:"year"},function(t){for(var i=0;i<t.length;i++)t[i].onclick=function(){for(var a=0;a<t.length;a++)n(t[a],"active","remove");C+=l(this,"data-value")-l(g,"data-value"),e.selectDate(this,b,"y",C)};a(b,function(e,t){b.index=b.index||0;var a=b.children.length;t>0?(b.index++,b.index>=0&&(b.index=0)):(b.index--,b.index<=-a&&(b.index=-(a-1)));var n="translateX("+b.index*(100/a)+"%)";b.style.WebkitTransform=n,b.style.transform=n,setTimeout(function(){j=!1},500)})})),h.isAndroid){var m=parseFloat(p.slice(p.indexOf("Android")+8));h.android_version=m,h.android_version<=4?setTimeout(function(){n(O,"active")},500):n(O,"active")}else n(O,"active");e.focusObj=this}};k.onclick=function(e){var t=e.targetTouches?e.targetTouches[0]:e||event;t.cancelBubble=!0},N.onclick=function(){r(),n(document.querySelector(".calen-time"),"active","remove")}}},t.prototype.createCalenList=function(e,t){function a(t,a,n){if(!o.shield)return!1;for(var i=0;i<o.shield.length;i++)if(o.shield[i].y=o.shield[i].y||e.getFullYear(),o.shield[i].m=o.shield[i].m||e.getMonth()+1,o.shield[i].d=o.shield[i].d||e.getDate(),t==o.shield[i].y&&a==o.shield[i].m&&n==o.shield[i].d)return!0;return!1}var i=document.createElement("div"),r=0,o=this;e=e||{},e.m=e.m||0,e.y=e.y||0;var c=new Date,c=new Date,h=c.getDate();c.setFullYear(c.getFullYear()+e.y,c.getMonth()+e.m+1,1,0,0,0),c.setDate(0);var d=c.getDate();c.setDate(1);var u=c.getDay(),c=new Date;c.setFullYear(c.getFullYear()+e.y,c.getMonth()+e.m,1,0,0,0);var p=c.getMonth()+1,f=c.getFullYear();c.setDate(0);for(var m=c.getDate(),y=[],b=m;b>0;b--)y.push(b);t&&(g.innerHTML=f,w.innerHTML=10>p?"0"+p:p,l(g,"data-value",f),l(w,"data-value",p-1));var D=u+7;D=D>=10?D-7:D;for(var b=0;D>b;b++){var x=s("span"),C=s("a",{"data-calen":f+"/"+(p-1)+"/"+y[b],"class":"prev-m prev-to-month pasted",href:"javascript:;"},y[b]);(y[b]==h&&1==e.m&&!e.y&&!e.d||!e.y&&Number(o.fixDate.m)+1==p&&o.fixDate.d==y[b])&&n(C,"today"),a(f,p-1,y[b])&&n(C,"pasted shield"),x.appendChild(C),i.children.length?i.insertBefore(x,i.children[0]):i.appendChild(x),r++}for(var b=0;d>b;b++){r++;{var j=b+1,x=s("span"),C=s("a",{"data-calen":f+"/"+p+"/"+j,href:"javascript:;"},j);new Date}switch(r%7){case 0:case 1:C.className="weekend"}!e.m&&!e.y||!e.y&&o.fixDate.m==p?o.fixDate.d==j&&o.fixDate.m==p||!o.fixDate.d&&j==h?C.className=C.className+" today":(v||o.hoursPast)&&h>j&&(C.className=C.className+" expire pasted"):(v||o.hoursPast)&&e.m<0&&e.y<=0&&(C.className=" expire pasted"),(f<=o.fixDate.y&&p<=o.fixDate.m&&j<e.d||f<=o.fixDate.y&&p<o.fixDate.m)&&o.startDate&&n(C,"expire pasted"),a(f,p,j)&&n(C,"pasted shield"),x.appendChild(C),i.appendChild(x)}for(var O=42-i.children.length,b=0;O>b;b++){var j=b+1,x=s("span"),C=s("a",{"data-calen":f+"/"+(p+1)+"/"+j,"class":"next-m next-to-month",href:"javascript:;"},j);(j==h&&-1==e.m&&!e.y&&!e.d||!e.y&&o.fixDate.m-1==p&&o.fixDate.d==j)&&n(C,"today"),a(f,p+1,j)&&n(C,"pasted shield"),x.appendChild(C),i.appendChild(x)}return i},t.prototype.createDate=function(e,t){e=e||{},e.start=e.start||1,e.end=e.end||12,e.type=e.type||"month";for(var a=s("div",{"class":"month"==e.type?"calen-months":"calen-years"}),n=s("div"),i=[],r=0,o=0,c=0,l=(new Date).getFullYear(),h=e.start;h<=e.end;h++){var d=s("span"),u=s("a",{"data-value":"year"==e.type?h:h-1,href:"javascript:;"},10>h?"0"+h:h);i.push(u),"year"==e.type?(r>=12&&(a.appendChild(n),n=s("div"),r=0,o++),h==l&&(c=o),d.appendChild(u),n.appendChild(d)):(d.appendChild(u),a.appendChild(d)),r++}if("year"==e.type){b&&k&&k.removeChild(b),a.appendChild(n),b=a,y=i,r&&o++,a.style.width=100*o+"%";for(var h=0;o>h;h++)a.children[h].style.width=100/o+"%";a.style.WebkitTransform="translateX(-"+c*(100/o)+"%)",a.style.transform="translateX(-"+c*(100/o)+"%)",b.index=-c}else D&&k&&k.removeChild(D),D=a,m=i;k.appendChild(a),t&&t(i)},t.prototype.createTime=function(e,t,a){var o=i(k,".calen-time"),c=[],h=new Date,d=h.getDate(),u=h.getHours(),p=this;if(o.length){o=o[0];for(var v=i(o,"a"),f=0;f<v.length;f++)c.push({obj:v[f],time:parseInt(l(v[f],"data-time"),10)})}else{o=s("div",{"class":"calen-time"});for(var f=0;24>f;f++){var m=10>f?"0"+f:f;m+=":00";var y=s("span"),g=s("a",{href:"javascript:;","data-time":m},m);y.appendChild(g),o.appendChild(y),c.push({obj:g,time:parseInt(m,10)})}}n(o,"active");for(var f=0;f<c.length;f++)p.hoursPast&&(0>x&&0>=C||a==d&&c[f].time<=u||0>=x&&0>=C&&d>a)?(n(c[f].obj,"expire pasted"),c[f].obj.active=!1):(n(c[f].obj,"expire pasted","remove"),c[f].obj.active=!0),function(a){c[f].obj.onclick=function(){if(this.active){var i=t+" "+(10>a?"0"+a:a)+":00";null!=e.value?e.value=i:null!=e.innerHTML&&(e.innerHTML=i),r(),p.changes()}n(o,"active","remove")}}(c[f].time);k.appendChild(o)},t.prototype.createHeader=function(e){f=f||[];var t=this,a=s("div",{"class":"calen-header"}),i=s("div",{"class":"calen-year"}),r=s("a",{"class":"float-l year-prev switch-btn",href:"javascript:;"},"&lt;"),o=s("a",{"class":"float-r year-next switch-btn",href:"javascript:;"},"&gt;"),c=s("a",{"class":"calen-year-txt calen-title",href:"javascript:;"});i.appendChild(r),i.appendChild(c),i.appendChild(o);var l=s("div",{"class":"calen-month"}),h=s("a",{"class":"float-l month-prev switch-btn",href:"javascript:;"},"&lt;"),d=s("a",{"class":"float-r month-next switch-btn",href:"javascript:;"},"&gt;"),u=s("a",{"class":"calen-month-txt calen-title",href:"javascript:;"});l.appendChild(h),l.appendChild(u),l.appendChild(d),a.appendChild(i),a.appendChild(l),f.push(c,u),w=u,g=c,h.onclick=function(){t.switchDate(-1)},d.onclick=function(){t.switchDate(1)},r.onclick=function(){t.switchDate(-1,"year")},o.onclick=function(){t.switchDate(1,"year")},k.children.length?k.insertBefore(a,k.children[0]):k.appendChild(a);for(var p=0;p<a.children.length;p++)a.children[p].ontouchstart=function(){n(this,"active")},a.children[p].ontouchend=function(){n(this,"active","remove")};e&&e()},t.prototype.createWeek=function(){for(var e=s("div",{"class":"calen-week"}),t="日一二三四五六",a=0;7>a;a++){var n=a+1,i={};(n%7==1||n%7==0)&&(i["class"]="weekend"),e.appendChild(s("span",i,t.charAt(a)))}k.appendChild(e)},t.prototype.appendList=function(e,t){e=e||{},e.prev=e.prev||{m:x-1,y:C},e.now=e.now||{m:x,y:C},e.next=e.next||{m:x+1,y:C},T.innerHTML="",T.appendChild(this.createCalenList(e.prev)),T.appendChild(this.createCalenList(e.now,!0)),T.appendChild(this.createCalenList(e.next)),t&&t()},t.prototype.addEvent=function(){for(var e=this,t=T.getElementsByTagName("a"),a=0;a<t.length;a++)t[a].onclick=function(){if(n(this,"prev-to-month","has"))e.switchDate(-1);else if(n(this,"next-to-month","has"))e.switchDate(1);else if(!n(this,"pasted","has")&&!n(this,"shield","has")){var t=l(this,"data-calen"),a=this.innerHTML;if(t=o(t,l(e.focusObj,"format")||!1),e.hours)e.createTime(e.focusObj,t,a,v);else{if(e.focusObj&&"undefined"==typeof e.focusObj.value)e.focusObj.innerHTML=t;else if(e.focusObj){var i=typeof e.focusObj.value;("string"===i||"number"===i)&&e.focusObj.oldValue!=t&&(e.focusObj.value=t,e.focusObj.oldValue=t,e.changes())}r()}}}},t.prototype.switchDate=function(e,t){var a=this;switch(t=t||"month"){case"month":e>0?x++:x--,a.startJSON.prev.m=x-1,a.startJSON.now.m=x,a.startJSON.next.m=x+1,a.transitions(T,e>0?-1:1);break;case"year":a.appendList({prev:{m:x,y:C-1},next:{m:x,y:C+1}},function(){e>0?C++:C--,a.startJSON.prev.y=C,a.startJSON.now.y=C,a.startJSON.next.y=C,a.transitions(T,e>0?-1:1)})}},t.prototype.transitions=function(e,t){function a(){i.appendList(i.startJSON,function(){n(e,"silde prev-to next-to","remove"),i.addEvent(),j=!1})}var i=this;t>0?n(e,"silde prev-to"):n(e,"silde next-to"),setTimeout(function(){a()},500)},t.prototype.selectDate=function(e,t,a,i){var s=this;this.startJSON.prev[a]="m"==a?i-1:i,this.startJSON.now[a]=i,this.startJSON.next[a]="m"==a?i+1:i,this.appendList(this.startJSON,function(){s.addEvent()}),n(e,"active"),n(t,"active","remove"),b.show=!1,D.show=!1},t.prototype.changes=function(){var t=e.jQuery||e.$||null;t?t(this.focusObj)&&t(this.focusObj).change&&t(this.focusObj).change():this.focusObj.onchange&&this.focusObj.onchange()},e.addEventListener("load",function(){new t},!1),t})});