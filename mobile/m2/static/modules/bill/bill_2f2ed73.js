define("bill",function(e){"use strict";var n=e("common/utility/index"),t=e("components/zepto/zepto.js"),a=e("components/fastclick/fastclick.js"),o=(e("yue_ui/frozen"),e("common/I_APP/I_APP")),i=e("common/scroll/index"),r=Handlebars.template(function(e,n,t,a,o){function i(e,n){var a,o,i="";return i+='\n    <li class="ui-border-t">\n        <div class="ui-list-info">\n            ',(o=t.content1)?a=o.call(e,{hash:{},data:n}):(o=e&&e.content1,a=typeof o===l?o.call(e,{hash:{},data:n}):o),(a||0===a)&&(i+=a),i+="\n        </div>\n        <div >",(o=t.content2)?a=o.call(e,{hash:{},data:n}):(o=e&&e.content2,a=typeof o===l?o.call(e,{hash:{},data:n}):o),(a||0===a)&&(i+=a),i+="</div>\n    </li>\n    "}this.compilerInfo=[4,">= 1.0.0"],t=this.merge(t,e.helpers),o=o||{};var r,c="",l="function",s=this;return c+='<ul class="ui-list ui-list-text ui-border-b" >\n    ',r=t.each.call(n,n&&n.data,{hash:{},inverse:s.noop,fn:s.program(1,i,o),data:o}),(r||0===r)&&(c+=r),c+="\n</ul>"}),c=e("common/widget/abnormal/index"),l=e("menu/index");"addEventListener"in document&&document.addEventListener("DOMContentLoaded",function(){a.attach(document.body)},!1),function(e,t){var a=e({});o.isPaiApp?o.check_login(function(e){var a=t.__YUE_APP_USER_INFO__,i=n.login_id,r=t.__YUE_APP_USER_INFO__.user_id||0,c=i==r;return console.log("=====local_user_id,client_user_id====="),console.log(i,r),n.ajax_request({url:t.$__config.ajax_url.auth_get_user_info,data:a,cache:!1,async:c,beforeSend:function(){},success:function(e){console.log(e)},error:function(){},complete:function(){}}),n.int(e.pocoid)?void 0:void o.openloginpage(function(e){"0000"==e.code&&n.refresh_page()})}):n.auth.is_login()||(t.location.href="../../account/login.php?redirect_url="+encodeURIComponent(t.location.href));var s=[{index:0,content:"首页",click_event:function(){o.isPaiApp&&o.switchtopage({page:"hot"})}},{index:1,content:"提现",click_event:function(){t.location.href="../withdrawals/"}}];l.render(e("body"),s);var _=0;n.$_AppCallJSObj.on("__showTopBarMenu",function(){_++,_%2!=0?l.show():l.hide()});var d=function(){var e=this;e.init()};d.prototype={refresh:function(){var e=this;e.action(a.type,a.page)},load_more:function(){var t=this;n.int(a.has_next_page)?(a.page++,t.action(a.type,a.page)):(e.tips({content:"已经到尽头啦",stayTime:3e3,type:"warn"}),a.scroll_view_obj&&a.scroll_view_obj.dragger.reset())},init:function(){var n=this;a.$tab_container=e(".ui-tab"),a.tab_obj=n.init_tab_container(".ui-tab"),a.$loading={},a.$tarde_container=e('[data-role="trade"]'),a.$recharge_container=e('[data-role="recharge"]'),a.$withdraw_container=e('[data-role="withdraw"]'),a.$no_data=e('[data-role="no-data"]'),a.$has_data=e('[data-role="has-data"]'),a.page=1,a.type=e("#type").val(),a.$scroll_wrapper=e('[data-role="wrapper"]'),a.scroll_view_obj=i(a.$scroll_wrapper),a.scroll_view_obj.on("success:drag_down_load",function(){n.refresh()}),a.scroll_view_obj.on("success:drag_up_load",function(){n.load_more()}),n._setup_event(),n.refresh()},init_tab_container:function(){return{}},action:function(o,i){var r=this;r._sending=!1,r._sending||(a.ajax_obj=n.ajax_request({url:t.$__config.ajax_url.bill,data:{type:o,page:i},beforeSend:function(){a.$loading=e.loading({content:"加载中..."})},success:function(e){r._sending=!1,a.$loading.loading("hide");var n=e.result_data;a.trigger("success:get_bill_list",n)},error:function(n){r._sending=!1,a.$loading.loading("hide"),a.trigger("error:get_bill_list",n),e.tips({content:"网络异常",stayTime:3e3,type:"warn"})}}))},_setup_event:function(){a.on("success:get_bill_list",function(n,t){try{a.has_next_page=t.has_next,a.scroll_view_obj&&a.scroll_view_obj.dragger.reset(),a.$has_data.removeClass("fn-hide");var o=a.ajax_obj.xhr_data;if(!t.data.length&&1==o.page)return a.$has_data.addClass("fn-hide"),a.$no_data.removeClass("fn-hide").html(""),void c.render(a.$no_data[0],{});if(t.code>0){var i=r(t),l=1==o.page?"html":"append";a.$tarde_container[l](i)}else e.tips({content:t.msg,stayTime:3e3,type:"warn"})}catch(s){console.log(s)}}).on("error:get_bill_list",function(){a.scroll_view_obj&&a.scroll_view_obj.dragger.reset()})}},a.bill_obj=new d}(t,window)});