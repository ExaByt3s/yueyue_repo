define("recharge/online",function(e){"use strict";var t=e("common/utility/index"),a=e("components/zepto/zepto.js"),c=e("components/fastclick/fastclick.js"),n=(e("yue_ui/frozen"),e("common/I_APP/I_APP"));"addEventListener"in document&&document.addEventListener("DOMContentLoaded",function(){c.attach(document.body)},!1),function(e,a){n.isPaiApp&&n.check_login(function(e){return t.int(e.pocoid)?void 0:void n.openloginpage(function(e){"0000"==e.code&&t.refresh_page()})});var c={};c.quotes_id=e("#quotes_id").val(),c.$page_container=e('[data-role="page-container"]');var s=function(){var e=this;e.init()};s.prototype={refresh:function(){},page_back:function(){},init:function(){var e=this;e.setup_event()},hide:function(){},setup_event:function(){var s=this;c.$pay_li=e('[data-role="pay-li"]'),c.$select_price=e('[data-role="select-recharge-price"]'),c.$recharge_btn=e('[data-role="recharge-btn"]'),c.$pay_li.each(function(t,a){e(a).find('[data-role="yes-tag"]').hasClass("icon-select-active")&&(c.selected_pay_action_type=e(a).attr("data-pay-type"))}),c.$select_price.each(function(t,a){e(a).find('[data-role="yes-tag"]').hasClass("icon-select-active")&&(c.$select_price_val=e(a).attr("data-price"))}),c.$select_price.on("click",function(t){{var a=e(t.currentTarget),n=a.find('[data-role="yes-tag"]');n.hasClass("icon-select-active")}c.$select_price.find('[data-role="yes-tag"]').removeClass("icon-select-active").addClass("icon-select-no"),n.addClass("icon-select-active").removeClass("icon-select-no"),c.$select_price_val=a.attr("data-price")}),c.$pay_li.on("click",function(t){{var a=e(t.currentTarget),n=a.find('[data-role="yes-tag"]');n.hasClass("icon-select-active")}c.$pay_li.find('[data-role="yes-tag"]').removeClass("icon-select-active").addClass("icon-select-no"),n.addClass("icon-select-active").removeClass("icon-select-no");var s=a.attr("data-pay-type");c.selected_pay_action_type=s}),c.$recharge_btn.on("click",function(){var i=c.$select_price_val,r=c.selected_pay_action_type;if(confirm("确定充值?")){if(!i)return void e.tips({content:"请选择充值金额",stayTime:3e3,type:"warn"});if(!r)return void e.tips({content:"请选择支付方式",stayTime:3e3,type:"warn"});var o=a.location,l="http://yp.yueus.com/mobile/";if(/predev/.test(o.href))var d="m2predev/recharge/success.php";else var d="m2/recharge/success.php";var p={};t.ajax_request({url:a.$__config.ajax_url.recharge,type:"POST",data:{type:"recharge",third_code:r,amount:i,redirect_url:l+d},beforeSend:function(){p=e.loading({content:"发送中..."})},success:function(c){p.loading("hide");var i=c.result_data&&c.result_data.third_code,r=l+d+"?"+c.result_data.payment_no;if(c.result_data.code>0)var o="success";else var o="warn";switch(e.tips({content:c.result_data.message,stayTime:3e3,type:o}),i){case"alipay_purse":n.alipay({alipayparams:c.result_data.data,payment_no:c.result_data.payment_no},function(c){var n=t.int(c.result),i=s.after_pay_text(n);e.tips({content:i,stayTime:3e3,type:"success"}),(1==n||-1==n||-2==n)&&(a.location.href=r)});break;case"tenpay_wxapp":n.wxpay(JSON.parse(c.result_data.data),function(c){var n=t.int(c.result),i=s.after_pay_text(n);e.tips({content:i,stayTime:3e3,type:"success"}),(1==n||-1==n||-2==n)&&(a.location.href=r)})}},error:function(){p.loading("hide"),e.tips({content:"网络异常",stayTime:3e3,type:"warn"})}})}})},clear_select:function(e){var t=c.$pay_li.find('[data-role="yes-tag"]');e?c.$select_ab_btn.find('[data-role="yes-tag"]').removeClass("icon-select-active").addClass("icon-select-no"):t.removeClass("icon-select-active").addClass("icon-select-no")},after_pay_text:function(e){var a="";switch(t.int(e)){case 1:case-2:case-1:a="支付成功";break;case 0:a="其它错误";break;case-3:a="支付失败";break;case-4:a="支付取消"}return a}};var i=new s;i.refresh()}(a,window)});