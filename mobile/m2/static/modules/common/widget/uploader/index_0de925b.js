define("common/widget/uploader/index",function(e,i,t){var a=e("components/zepto/zepto.js"),n=e("common/I_APP/I_APP"),l=e("common/utility/index"),d=(e("yue_ui/frozen"),Handlebars.template(function(e,i,t,a,n){function l(e,i){var a,n,l="";return l+='\n        <img src="',(n=t.img_url)?a=n.call(e,{hash:{},data:i}):(n=e&&e.img_url,a=typeof n===g?n.call(e,{hash:{},data:i}):n),l+=u(a)+'"\n             style="max-height: 100%;max-width: 100%;">\n        <div class="close-out " data-role="del-pic" >\n            <i class="icon close-btn"></i>\n        </div>\n    '}function d(e,i){var a,n,l="";return l+='\n        <img src="',(n=t.default_img_url)?a=n.call(e,{hash:{},data:i}):(n=e&&e.default_img_url,a=typeof n===g?n.call(e,{hash:{},data:i}):n),l+=u(a)+'" data-role="upload-flag"\n             style="max-height: 100%;max-width: 100%;">\n\n    '}this.compilerInfo=[4,">= 1.0.0"],t=this.merge(t,e.helpers),n=n||{};var o,c,s="",g="function",u=this.escapeExpression,h=this;return s+='<div class="ui-uploader ',(c=t.is_active)?o=c.call(i,{hash:{},data:n}):(c=i&&i.is_active,o=typeof c===g?c.call(i,{hash:{},data:n}):c),s+=u(o)+'" style="width:',(c=t.width)?o=c.call(i,{hash:{},data:n}):(c=i&&i.width,o=typeof c===g?c.call(i,{hash:{},data:n}):c),s+=u(o)+";height:",(c=t.height)?o=c.call(i,{hash:{},data:n}):(c=i&&i.height,o=typeof c===g?c.call(i,{hash:{},data:n}):c),s+=u(o)+'" >\n    ',o=t["if"].call(i,i&&i.upload,{hash:{},inverse:h.program(3,d,n),fn:h.program(1,l,n),data:n}),(o||0===o)&&(s+=o),s+="\n\n</div>"}));t.exports={render:function(e,i){var t=this;return i=i||{},i.upload=i.upload||!1,i.upload?i.is_active="active":(i.default_img_url="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAYAAAA9zQYyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3tpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpENDZEQ0I5RjQwMDdFNDExODJEREMzQzk1NTAyQzA5MiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBNjI0RUFDQUE2OUYxMUU0QUQ3RUUwNzA4OUI5NzhCNSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBNjI0RUFDOUE2OUYxMUU0QUQ3RUUwNzA4OUI5NzhCNSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTg2NDhhMDAtMmQ2OS0yMjQzLWJiZDMtNmQzYWQ0OTg2MTZkIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ZWYyMzJhMDktMTdiOC0xMWU0LThlYmMtZDk2MDViOWUyM2M5Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+gWRlewAABElJREFUeNrt2stqXWUYgOHXnRgVvQexIB7i4QZ0Ig4q9S4stKIgFcGBYweCeACFFvUGOlbsoHSiXoC29TCpeA0qYiStA/+tmyDYqF3JXnkeCNndySrt3zcrX3a/286fP98eD1cnq2eq+6o7xvO37fm8G92cqa87qGtdN811v1bXqgvVh9XXq5+0WHm8Vb1XXa7OVA+uxAyHxR3VQ6PRy9XZ6q7lBzdXYv6kenrlwq/HV8Cn1fc38RX0b++At/q6g7rWdf/vdXdWx6rjY4J4eNyQT1X3j4liZ3mHfnsl5p3qxerR8fy34zYPB+nX6pvR5KPV6eqX8bGnqreWI8f2qHwZ84nq/eq6M+SQul6dq54dzTYC316M2/fGePJMddF5sSYuVS+PxxvVycWYSaqujuphnZwd7VYdX4xBu/ED4K7zYc3sjnarji3GKxz1x+t6sI6W7W6tvg59zbmwpv5sd7P/9hotHAY7y44XzoI5ETSChsNqs7+2mMzSrLMb7tAYOUDQIGgQNIIGQYOgQdCwD7btmAvbdhg5QNAw5Qxt2445sG2HkQMEDYIGQSNoEDQIGgQN+2HbjrmwbYeRAwQNU87Qtu2YA9t2GDlA0CBoEDSCBkGDoEHQIGiOLOujzIX1UYwcIGiYcoa2PsocWB/FyMG/83r143iPoNfeq9U91SuOQtBzsDHebzkKQYOgETQIGgQNgoZ/Zn2UubA+ipEDBA1TztDWR5kD66MYOUDQIGgQNIIGQYOgQdCwH7btmAvbdhg5QNAw5Qxt2445sG2HkQMEfYh8Nr41Tf2291vj1G+fCXqenjiiN64nBD1Pnx/RoL84Kn/RzSP2D/vkQf4EPng1yR0aBI2gYf1naDMdc2DbDiMHCBqmnKFt2zEHtu0wcoCgQdAgaAQNggZBg6BhP2zbMRe27TBygKBhyhnath1zYNsOIwcIGgQNgkbQTGF3vN9xFIKegzeqn6s3HcWttekIJvHaeMMdGvZ3h/Y/hMyBbTuMHCBomHKGtm3HHNi2w8gBggZBg6ARNAgaBA2Chv2wbcdc2LbDyAGChilnaNt2zIFtO4wcIGgQNAgaQYOgQdAgaNgP23bMhW07jBwgaJhyhrZtxxzYtsPIAYIGQYOgETQIGgQNgob9sG3HXNi2w8gBgoYpg74x3rYcB2vqnmXHq3foY86FNXXv6h16Zzw+7lxYU0+P9z8tqmvjF89VG86GNbNRnRyPf1hUF8YvHqlOOR/WzKnRbtXFRfVRtTueeHvl9g2H3VOj2UbDHy6qK9W58eRW9Un1Ql7S4/BajDvzx/316ty56soy2jPVxZWo36u+ql6qHqhud4YcsLur7dHkl9XZ6q7xsUuj4TbHEzvVieqt6vnxFbBdvbPyG+7d+bhxk3+Qqa87qGtdd2uv++lvPud69cGIeac9Y8VO9WL1WPVu9V31mxsDh8zP1dXR6OPV6eqX5Qd/B6Mc0P6p8XDBAAAAAElFTkSuQmCC",i.width="90px",i.height="90px"),e.innerHTML=d(i),t.$el=a(e),t._setup_event(),t},_setup_event:function(){var e=this;e.$el.find('[data-role="del-pic"]').on("click",function(){e.reset()}),e.$el.find('[data-role="upload-flag"]').on("click",function(){e.$el.trigger("click:upload_flag")}),e.$el.on("success:web_upload_img",function(){function i(){if(4==n.readyState&&(window.$loading.loading("hide"),200==n.status)){var i=JSON.parse(n.response);console.log(i),e.pic_list=i.url,e.$el.trigger("upload:success",e.pic_list)}}var t=new FormData;t.append("opus",e.submit_file),t.append("poco_id",l.login_id);var t=new FormData;t.append("opus",e.submit_file),t.append("poco_id",l.login_id);var n=new XMLHttpRequest;n.open("POST","http://sendmedia.yueus.com:8079/upload.cgi",!0),n.onreadystatechange=i,n.send(t),window.$loading=a.loading({content:"·¢ËÍÖÐ..."})}),document.getElementById("uploadBtn")&&document.getElementById("uploadBtn").addEventListener("change",function(){var i=this.files[0];e.submit_file=i;var t=new FileReader;t.onload=function(){console.log(this);var t=new FileReader;t.readAsArrayBuffer(i),t.onload=function(){binary_result=this.result,e.$el.trigger("success:web_upload_img",binary_result),console.log(binary_result)}},t.readAsDataURL(i)})},show:function(){},hide:function(){},reset:function(){var e=this;e.render(e.$el[0],{}),e.pic_list=[]},get:function(){var e=this;return e.pic_list||[]},upload_action:function(e){var i=this;n.isPaiApp&&n.upload_img("multi_img",{is_async_upload:0,max_selection:1,is_zip:1},function(t){var a=[];if(i.pic_list=[],t.imgs.length>0)for(var n=0;n<t.imgs.length;n++){var d=l.matching_img_size(t.imgs[n].url,165);a[0]=d}i.pic_list=a,e.callback&&e.callback.call(this,a)})}}});