define("account/reg",function(n){"use strict";{var e=n("common/utility/index"),t=n("components/zepto/zepto.js"),o=n("components/fastclick/fastclick.js");n("yue_ui/frozen")}"addEventListener"in document&&document.addEventListener("DOMContentLoaded",function(){o.attach(document.body)},!1),function(n,t){var o={};o.$page_container=n('[data-role="page-container"]'),o.$login_btn=n('[data-role="login"]'),o.$confirm_btn=n('[data-role="confrim"]'),o.$verfiy_code=n('[data-role="account-verfiy-code"]'),o.$enter_phone=n('[data-role="enter-phone"]'),o.$verfiy_btn=n('[data-role="get_code"]'),o.count_btn=o.$verfiy_btn.find("span"),o.$login_btn.on("click",function(){var n=e.get_url_params(t.location.href,"redirect_url");if(n)var o="?redirect_url="+n;else var o="";t.location.href="login.php"+o}),o._count_down=function(n){o.counting=!0,o.count_btn.html(n),o.count_Interval=setInterval(function(){n--,0==n?o._stop_count_down():o.count_btn.html(n)},1e3)},o._stop_count_down=function(){clearInterval(o.count_Interval),o.count_btn.html("重新获取"),o.counting=!1};var r=function(r){var i={};e.ajax_request({url:t.$__config.ajax_url.reg,data:r.data,beforeSend:function(){i=n.loading({content:"发送中..."})},success:function(n){i.loading("hide"),r.success.call(this,n)},error:function(){i.loading("hide"),n.tips({content:"网络异常",stayTime:3e3,type:"warn"}),o.has_reg=!1}})};o.$enter_phone[0].oninput=function(){""!=o.$enter_phone.val()?o.$confirm_btn.removeClass("no-active").removeAttr("disabled"):o.$confirm_btn.addClass("no-active").attr("disabled","disabled")},o.$verfiy_btn.on("click",function(){var e=o.$enter_phone.val(),t="bind_sent_verify_code";return o.has_reg?void 0:parseInt(e)&&""!=e.trim()&&-1==e.trim().indexOf(" ")?void(o.counting||(o._count_down(60),r({data:{phone:e,type:t},success:function(e){var e=e.result_data,t=e.msg,r=e.code,i="";o.has_reg=!1,o.is_model_no_pwd=!1,1==r?i="success":2==r?(i="success",o._stop_count_down(),o.has_reg=!0):5==r?(i="success",o.is_model_no_pwd=!0):(i="warn",o._stop_count_down()),n.tips({content:t,stayTime:3e3,type:i})}}))):void n.tips({content:"手机号格式错误",stayTime:3e3,type:"warn"})}),o.$confirm_btn.on("click",function(r){n(r.currentTarget);if(e.is_empty(o.$enter_phone.val()))return void n.tips({content:"手机号不能为空",stayTime:3e3,type:"warn"});if(e.is_empty(o.$verfiy_code.val()))return void n.tips({content:"验证码不能为空",stayTime:3e3,type:"warn"});var i=1*o.$enter_phone.val();i=i.toString(16);var a=e.get_url_params(t.location.href,"redirect_url");if(a)var c="&redirect_url="+a;else var c="";t.location.href="set_pwd.php?verify_code="+o.$verfiy_code.val()+"&phone="+i+"0"+c})}(t,window)});