define("account/reg",function(e){"use strict";{var n=e("common/utility/index"),t=e("components/zepto/zepto.js"),o=e("components/fastclick/fastclick.js");e("yue_ui/frozen")}"addEventListener"in document&&document.addEventListener("DOMContentLoaded",function(){o.attach(document.body)},!1),function(e,t){var o={};o.$page_container=e('[data-role="page-container"]'),o.$login_btn=e('[data-role="login"]'),o.$confirm_btn=e('[data-role="confrim"]'),o.$verfiy_code=e('[data-role="account-verfiy-code"]'),o.$enter_phone=e('[data-role="enter-phone"]'),o.$verfiy_btn=e('[data-role="get_code"]'),o.count_btn=o.$verfiy_btn.find("span"),o.$login_btn.on("click",function(){var e=n.get_url_params(t.location.href,"redirect_url");if(e)var o="?redirect_url="+e;else var o="";t.location.href="login.php"+o}),o._count_down=function(e){o.counting=!0,o.count_btn.html(e),o.count_Interval=setInterval(function(){e--,0==e?o._stop_count_down():o.count_btn.html(e)},1e3)},o._stop_count_down=function(){clearInterval(o.count_Interval),o.count_btn.html("重新获取"),o.counting=!1};var r=function(r){var a={};n.ajax_request({url:t.$__config.ajax_url.reg,data:r.data,beforeSend:function(){a=e.loading({content:"发送中..."})},success:function(e){a.loading("hide"),r.success.call(this,e)},error:function(){a.loading("hide"),e.tips({content:"网络异常",stayTime:3e3,type:"warn"}),o.has_reg=!1}})};o.$enter_phone[0].oninput=function(){""!=o.$enter_phone.val()?o.$confirm_btn.removeClass("no-active").removeAttr("disabled"):o.$confirm_btn.addClass("no-active").attr("disabled","disabled")},o.$verfiy_btn.on("click",function(){var n=o.$enter_phone.val(),t="bind_sent_verify_code";return o.has_reg?void 0:parseInt(n)&&""!=n.trim()&&-1==n.trim().indexOf(" ")?void(o.counting||(o._count_down(60),r({data:{phone:n,type:t},success:function(n){var n=n.result_data,t=n.msg,r=n.code,a="";o.has_reg=!1,o.is_model_no_pwd=!1,1==r?a="success":2==r?(a="success",o._stop_count_down(),o.has_reg=!1):5==r?(a="success",o.is_model_no_pwd=!0):(a="warn",o._stop_count_down()),e.tips({content:t,stayTime:3e3,type:a})}}))):void e.tips({content:"手机号格式错误",stayTime:3e3,type:"warn"})}),o.$confirm_btn.on("click",function(a){var i=e(a.currentTarget);if(!i.hasClass("no-active")){if(n.is_empty(o.$enter_phone.val()))return void e.tips({content:"手机号不能为空",stayTime:3e3,type:"warn"});if(n.is_empty(o.$verfiy_code.val()))return void e.tips({content:"验证码不能为空",stayTime:3e3,type:"warn"});var c=o.$enter_phone.val(),s=o.$verfiy_code.val();r({data:{phone:c,type:"verify_phone",verify_code:s},success:function(r){var r=r.result_data,a=r.msg,i=r.code;if(e.tips({content:a,stayTime:3e3,type:"warn"}),1==i){var c=1*o.$enter_phone.val();c=c.toString(16);var s=n.get_url_params(t.location.href,"redirect_url");if(s)var _="&redirect_url="+s;else var _="";t.location.href="set_pwd.php?verify_code="+o.$verfiy_code.val()+"&phone="+c+"0"+_}}})}})}(t,window)});