define("coupon/list",function(a,e,t){"use strict";var n=a("common/utility/index"),o=a("components/zepto/zepto.js"),i=a("components/fastclick/fastclick.js"),s=(a("yue_ui/frozen"),a("common/I_APP/I_APP")),r=Handlebars.template(function(a,e,t,n,o){function i(a,e,n){var o,i,d="";return d+='\r\n    <div class="widget-coupon ',o=t["if"].call(a,a&&a._class_for_available,{hash:{},inverse:_.program(4,r,e),fn:_.program(2,s,e),data:e}),(o||0===o)&&(d+=o),d+=" ",o=t["if"].call(a,n&&n.no_choose_btn,{hash:{},inverse:_.noop,fn:_.program(6,c,e),data:e}),(o||0===o)&&(d+=o),d+='" data-coupon_sn="',(i=t.coupon_sn)?o=i.call(a,{hash:{},data:e}):(i=a&&a.coupon_sn,o=typeof i===u?i.call(a,{hash:{},data:e}):i),d+=h(o)+'">\r\n        <div class="left-border">\r\n            <div class="inside"></div>\r\n        </div>\r\n        <div class="price" data-role="to_ticket_details_price">\r\n            <div class="type">',(i=t.scope_module_type_name)?o=i.call(a,{hash:{},data:e}):(i=a&&a.scope_module_type_name,o=typeof i===u?i.call(a,{hash:{},data:e}):i),d+=h(o)+'</div>\r\n            <div class="contain">\r\n                <div class="contain-left">',(i=t.coin)?o=i.call(a,{hash:{},data:e}):(i=a&&a.coin,o=typeof i===u?i.call(a,{hash:{},data:e}):i),d+=h(o)+'</div>\r\n                <div class="contain-right">',(i=t.face_value)?o=i.call(a,{hash:{},data:e}):(i=a&&a.face_value,o=typeof i===u?i.call(a,{hash:{},data:e}):i),d+=h(o)+'</div>\r\n            </div>\r\n        </div>\r\n        <div class="split">\r\n            <div class="top"></div>\r\n            <div class="mid"><div class="mid-in"></div></div>\r\n            <div class="bottom"></div>\r\n        </div>\r\n        <div class="details" data-role="to_ticket_details">\r\n            <div class="notice">',(i=t.batch_name)?o=i.call(a,{hash:{},data:e}):(i=a&&a.batch_name,o=typeof i===u?i.call(a,{hash:{},data:e}):i),(o||0===o)&&(d+=o),d+='</div>\r\n            <div class="date">',(i=t.start_time_str)?o=i.call(a,{hash:{},data:e}):(i=a&&a.start_time_str,o=typeof i===u?i.call(a,{hash:{},data:e}):i),d+=h(o)+"-",(i=t.end_time_str)?o=i.call(a,{hash:{},data:e}):(i=a&&a.end_time_str,o=typeof i===u?i.call(a,{hash:{},data:e}):i),d+=h(o)+'</div>\r\n        </div>\r\n        <div class="choosen_btn" data-role="choosen_btn">\r\n            <div class="tap" data-role="tap">\r\n                <div class="tap-in">\r\n                    <i class="icon icon-right-24x16 fn-hide"></i>\r\n                    <label class="ui-yue-checkbox">\r\n                        <i data-role="cb-btn" class="no-selected" type="checkbox" checked="" ></i>\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="right-border">\r\n            <div class="inside"></div>\r\n        </div>\r\n    </div>\r\n'}function s(){var a="";return a}function r(){return"unavailable"}function c(){return"no_choose_btn"}this.compilerInfo=[4,">= 1.0.0"],t=this.merge(t,a.helpers),o=o||{};var d,l="",_=this,u="function",h=this.escapeExpression;return d=t.each.call(e,e&&e.data,{hash:{},inverse:_.noop,fn:_.programWithDepth(1,i,o,e),data:o}),(d||0===d)&&(l+=d),l+="\r\n"});"addEventListener"in document&&document.addEventListener("DOMContentLoaded",function(){i.attach(document.body)},!1),s.isPaiApp&&s.check_login(function(a){return n.int(a.pocoid)?void 0:void s.openloginpage(function(a){"0000"==a.code&&n.refresh_page()})});var c={};t.exports={render:function(a,e){var t=this;return o.each(e,function(a,t){"available"==t.tab?e[a]=o.extend(!0,{},t,{_class_for_available:!0}):"used"==t.tab?e[a]=o.extend(!0,{},t,{_class_for_used:!0}):"expired"==t.tab&&(e[a]=o.extend(!0,{},t,{_class_for_expired:!0})),c[t.coupon_sn]=t}),a.html(""),a.html(r({data:e})),t.setup_event(),this},refresh:function(){var a=this,e=o.loading({content:"º”‘ÿ÷–..."});n.ajax_request({url:window.$__config.ajax_url.get_user_coupon_list_by_check,type:"GET",data:{module_type:a.module_type,request_id:a.request_id,quotes_id:a.quotes_id,order_total_amount:a.order_total_amount,order_pay_amount:a.order_pay_amount,page:a.page},success:function(t){var n=t.result_data;a.render(a.$container,n.list),e.loading("hide")},error:function(){e.loading("hide"),o.tips({content:"Õ¯¬Á“Ï≥£",stayTime:3e3,type:"warn"})}})},page_back:function(){},init:function(a){var e=this;return e.$container=a.container||{},e.module_type=a.module_type||"",e.request_id=a.request_id||"",e.order_total_amount=a.order_total_amount||"",e.order_pay_amount=a.order_pay_amount||"",e.page=a.page||1,e.refresh(),e},hide:function(){},setup_event:function(){var a=this;o("[data-coupon_sn]").on("click",function(e){var t=o(e.currentTarget),n=t.attr("data-coupon_sn"),i=t.find('[type="checkbox"]');i.hasClass("no-selected")?(o("[data-coupon_sn]").find('[type="checkbox"]').attr("checked","").addClass("no-selected"),i.removeAttr("checked").removeClass("no-selected"),a.selected_coupon=c[n]):(i.attr("checked","").addClass("no-selected"),a.selected_coupon="")})}}});